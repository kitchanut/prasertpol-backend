(window.webpackJsonp=window.webpackJsonp||[]).push([[236,142],{1045:function(t,e,n){"use strict";n.r(e);var r=n(202),o=n(190),c=n(149),m=n(424),l=n(984),d=n(633),f=n(412),_=n(423),h=n(422),v=n(435),x=n(9),w=(n(48),n(49),n(16),n(610)),k=n(120),D=n.n(k),Y={components:{},data:function(){return{loading:!1,menu:!1,month:(new Date).toISOString().substr(0,7),timeStart:D()().startOf("day").format("YYYY-MM-DD HH:mm"),timeEnd:D()().endOf("day").format("YYYY-MM-DD HH:mm"),search:"",data:[],headers:[]}},created:function(){this.headers=[{text:"ลำดับ",value:"no",width:"7%",align:"center"},{text:"ทีมสาขา",value:"branch_team.branch_team_name",width:"20%"},{text:"ทีม",value:"team.team_name",width:"20%"},{text:"เซล",value:"sale.first_name"},{text:"จำนวน",value:"total",align:"center",width:"15%"}]},mounted:function(){this.getData()},computed:{tHeader:function(){return this.headers.map((function(t){return t.text}))}},methods:{selectTimeStart:function(time){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.timeStart=time.timeStart,t.timeEnd=time.timeEnd,t.getData();case 3:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n={month:t.month},e.next=4,w.c(n);case 4:r=e.sent,console.log(r.data),t.data=r.data,t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},handleDownload:function(){for(var t=this,e=[],r=0;r<this.tHeader.length;r++)e.push(this.headers[r].value);this.$nextTick((function(){Promise.all([n.e(5),n.e(6)]).then(n.bind(null,983)).then((function(n){var r=t.tHeader,o=t.data,data=t.formatJson(e,o);n.export_json_to_excel({header:r,data:data,filename:"รายงานการขายรถ ("+D()().format("DD/MM/YYYY ( HH:mm น.)")+")",autoWidth:!0,bookType:"xlsx"})}))}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"car_models.car_model_name"==t?e.car_models.car_model_name:"car_serie_sub.car_serie_sub_name"==t?null==e.car_serie_sub?"ไม่ระบุ":e.car_serie_sub.car_serie_sub_name:"color.color_name"==t?e.color.color_name:"branch.branch_name"==t?e.branch.branch_name:"car_series.car_series_name"==t?e.car_series.car_series_name:"car_types"==t?e.car_types.car_type_name+"("+e.car_types.car_type_name_en+")":"car_gear"==t?1==e.car_gear?"AT":"MT":"car_price_vat"==t?Number(e.car_price_vat).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}):"net_price"==t?Number(e.net_price).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}):"contract.contract_date"==t?e.contract?D()(e.contract.contract_date).format("DD/MM/YYYY"):null:"amount_down"==t?Number(e.amount_down).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}):"amount_price"==t?Number(e.amount_price).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}):"province.name_th"==t?null==e.province?"":e.province.name_th:"car_regis"==t?null==e.car_regis?"":e.car_regis:"province_current.name_th"==t?null==e.province_current?"":e.province_current.name_th:"car_regis_current"==t?null==e.car_regis_current?"":e.car_regis_current:"working.customer_name"==t?e.working?e.working.customer_name:null:"created_at"==t?D()(e.created_at).format("DD/MM/YYYY ( HH:mm น.)"):e[t]}))}))}},watch:{data:function(){return this.data.map((function(t,e){t.no=e+1}))}}},y=n(38),component=Object(y.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n(o.a,[n(c.b,[n(_.a,[n(m.a,{staticClass:"d-flex align-end"},[n(f.a,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.month,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},on:{"update:returnValue":function(e){t.month=e},"update:return-value":function(e){t.month=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n(v.a,t._g(t._b({staticClass:"mt-0",attrs:{"prepend-icon":"mdi-calendar",readonly:"","hide-details":""},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n(d.a,{attrs:{type:"month",locale:"th","no-title":"",scrollable:""},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},[n(h.a),t._v(" "),n(r.a,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("\n                Cancel\n              ")]),t._v(" "),n(r.a,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.menu.save(t.month),t.getData()}}},[t._v("\n                OK\n              ")])],1)],1)],1),t._v(" "),n(h.a),t._v(" "),n(m.a,[n(v.a,{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),n("br"),t._v(" "),n(l.a,{attrs:{headers:t.headers,items:t.data,search:t.search,loading:t.loading,"no-data-text":"ยังไม่มีการเพิ่มข้อมูล","loading-text":"กำลังโหลดข้อมูลกรุณารอสักครู่","mobile-breakpoint":0,"multi-sort":!0,"footer-props":{"items-per-page-options":[5,10,20,50,100,-1]},dense:""}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},429:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return f}));var r=n(9),o=(n(48),n(98)),c=n.n(o),m="https://www.psnkp.co.th/server",l=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$nuxt){t.next=4;break}return t.next=3,$nuxt.$auth.loggedIn;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$nuxt){t.next=4;break}return t.next=3,window.$nuxt.$auth.getToken("local");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function f(t,e,n){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(regeneratorRuntime.mark((function t(e,n,data){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l()){t.next=9;break}return t.next=3,d();case 3:return t.t0=t.sent,r={Authorization:t.t0},t.next=7,c()({method:e,url:n,data:data,headers:r}).then((function(t){return t})).catch((function(t){if(401==t.response.status)return $nuxt.$auth.logout()}));case 7:return o=t.sent,t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},440:function(t,e,n){var r=n(17);r(r.S,"Object",{is:n(260)})},442:function(t,e,n){var r=n(51),o=n(264),c=n(62);t.exports=function(t,e,n,m){var l=String(c(t)),d=l.length,f=void 0===n?" ":String(n),_=r(e);if(_<=d||""==f)return l;var h=_-d,v=o.call(f,Math.ceil(h/f.length));return v.length>h&&(v=v.slice(0,h)),m?v+l:l+v}},459:function(t,e,n){var r=n(17);r(r.S,"Math",{sign:n(265)})},465:function(t,e,n){"use strict";var r=n(17),o=n(442),c=n(263),m=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(c);r(r.P+r.F*m,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},610:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return _}));var r=n(429);function o(t){var e=r.a+"/api/booking_car";return Object(r.b)("post",e,t)}function c(t){var e=r.a+"/api/report_purchase_car";return Object(r.b)("post",e,t)}function m(t){var e=r.a+"/api/report_sale_car";return Object(r.b)("post",e,t)}function l(t){var e=r.a+"/api/report_work_cancle";return Object(r.b)("post",e,t)}function d(t){var e=r.a+"/api/report_booking_duplicate";return Object(r.b)("post",e,t)}function f(t){var e=r.a+"/api/report_profit";return Object(r.b)("post",e,t)}function _(t){var e=r.a+"/api/report_commission";return Object(r.b)("post",e,t)}}}]);