(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{429:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return m}));var r=n(9),o=(n(48),n(98)),c=n.n(o),l="https://www.psnkp.co.th/server",d=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$nuxt){t.next=4;break}return t.next=3,$nuxt.$auth.loggedIn;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$nuxt){t.next=4;break}return t.next=3,window.$nuxt.$auth.getToken("local");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function m(t,e,n){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(regeneratorRuntime.mark((function t(e,n,data){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d()){t.next=9;break}return t.next=3,f();case 3:return t.t0=t.sent,r={Authorization:t.t0},t.next=7,c()({method:e,url:n,data:data,headers:r}).then((function(t){return t})).catch((function(t){if(401==t.response.status)return $nuxt.$auth.logout()}));case 7:return o=t.sent,t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},490:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"k",(function(){return d})),n.d(e,"p",(function(){return f})),n.d(e,"o",(function(){return m})),n.d(e,"j",(function(){return _})),n.d(e,"i",(function(){return v})),n.d(e,"c",(function(){return k})),n.d(e,"g",(function(){return D})),n.d(e,"h",(function(){return h})),n.d(e,"f",(function(){return w})),n.d(e,"e",(function(){return x})),n.d(e,"d",(function(){return $})),n.d(e,"n",(function(){return j})),n.d(e,"a",(function(){return O}));var r=n(429),path="/api/working";function o(){var t=r.a+"/api/working_allData";return Object(r.b)("get",t,{})}function c(t){var e=r.a+path;return Object(r.b)("post",e,t)}function l(t,e){var n=r.a+path+"/"+t;return Object(r.b)("post",n,e)}function d(t){var e=r.a+path+"/"+t;return Object(r.b)("get",e,{})}function f(t,e){var n=r.a+"/api/updateStatusWorking/"+t;return Object(r.b)("post",n,e)}function m(t,e){var n=r.a+"/api/updatePedding/"+t;return Object(r.b)("post",n,e)}function _(t){var e=r.a+"/api/workWhereClose";return Object(r.b)("post",e,t)}function v(t){var e=r.a+"/api/selectWhereCancle";return Object(r.b)("post",e,t)}function k(t){var e=r.a+"/api/work_cancel";return Object(r.b)("post",e,t)}function D(t){var e=r.a+"/api/get_work_cancel";return Object(r.b)("post",e,t)}function h(t){var e=r.a+"/api/working_search_id/"+t;return Object(r.b)("post",e,{})}function w(t){var e=r.a+"/api/followWork";return Object(r.b)("post",e,t)}function x(t){var e=r.a+"/api/followDown";return Object(r.b)("get",e,t)}function $(t){var e=r.a+"/api/commission_month_by_team_branch";return Object(r.b)("post",e,t)}function j(t,e){var n=r.a+"/api/updateNote/"+t;return Object(r.b)("post",n,e)}function O(t){var e=r.a+"/api/activeWorkingID";return Object(r.b)("get",e,t)}},719:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return f}));var r=n(429),path="/api/negotiations";function o(){var t=r.a+path;return Object(r.b)("get",t,{})}function c(t){var e=r.a+path+"/"+t;return Object(r.b)("delete",e,{})}function l(t){var e=r.a+path;return Object(r.b)("post",e,t)}function d(t,e){var n=r.a+path+"/"+t;return Object(r.b)("put",n,e)}function f(t){var e=r.a+path+"/"+t;return Object(r.b)("get",e,{})}},835:function(t,e,n){"use strict";n.r(e);var r=n(454),o=n(202),c=n(190),l=n(149),d=n(426),f=n(619),m=n(458),_=n(177),v=n(422),k=n(435),D=n(497),h=n(46),w=n(9),x=(n(48),n(719)),$=n(490),j={props:["id","action"],data:function(){return{dialog:!1,formTitle:"",user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission"),formData:{},dataWorking:[],formDataLoading:!1,rule:[function(t){return!!t||"กรุณาใส่ข้อมูล"}]}},mounted:function(){this.getDataWork()},methods:{getDataWork:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a();case 2:n=e.sent,t.dataWorking=n.data;case 4:case"end":return e.stop()}}),e)})))()},filterObject:function(t,e,n){return t.cars.car_no.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},onAction:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=18;break}if(t.formDataLoading=!0,"add"!=t.action){e.next=10;break}return e.next=5,x.d(t.formData);case 5:n=e.sent,t.$refs.form.reset(),200==n.status?t.$emit("success"):t.$emit("error"),e.next=16;break;case 10:if("edit"!=t.action){e.next=16;break}return e.next=13,x.e(t.id,t.formData);case 13:r=e.sent,t.$refs.form.reset(),200==r.status?t.$emit("success"):t.$emit("error");case 16:t.dialog=!1,t.formDataLoading=!1;case 18:case"end":return e.stop()}}),e)})))()}},watch:{dialog:function(){var t=this;this.dialog&&(this.$nextTick((function(){t.formData={},t.$refs.form.reset()})),this.$nextTick(Object(w.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!=t.action){e.next=4;break}t.formTitle="เพิ่มข้อมูล",e.next=11;break;case 4:return t.formDataLoading=!0,t.formTitle="แก้ไขข้อมูล",e.next=8,x.c(t.id);case 8:n=e.sent,t.formData=n.data,t.formDataLoading=!1;case 11:case"end":return e.stop()}}),e)})))))}}},O=n(38),component=Object(O.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n(d.a,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,c=e.attrs;return["add"==t.action?n(o.a,t._g(t._b({staticStyle:{height:"40px"},attrs:{color:"primary",dark:""}},"v-btn",c,!1),r),[n(_.a,{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n        เพิ่มรายการใหม่\n      ")],1):t._e(),t._v(" "),"edit"==t.action?n(o.a,t._g(t._b({attrs:{color:"primary",fab:"","x-small":"",dark:""}},"v-btn",c,!1),r),[n(_.a,[t._v(" mdi-pencil ")])],1):t._e()]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n(c.a,[n(m.a,{ref:"form",attrs:{autocomplete:"true"},on:{submit:function(e){return e.preventDefault(),t.onAction()}}},[n(h.a,{attrs:{color:"primary",dark:"",flat:""}},[t._v(" "+t._s(t.formTitle)+" "+t._s(t.id)+" ")]),t._v(" "),n(l.b,[n(c.a,{staticClass:"mt-3",attrs:{outlined:""}},[n(l.b,[n("h3",{staticClass:"mb-3"},[t._v("ข้อมูลการยื่นอนุมัติ")]),t._v(" "),n(r.a,{attrs:{filter:t.filterObject,items:t.dataWorking,"item-value":"id",label:"กรุณาเลือกลำดับงาน","single-line":"",outlined:"",dense:"","hide-details":""},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item;return[t._v("\n                  "+t._s(n.cars.car_no)+" | "+t._s(n.customer.customer_name)+"\n                ")]}},{key:"item",fn:function(e){var n=e.item;return[t._v("\n                  W"+t._s(n.id)+" | "+t._s(n.cars.car_no)+" | "+t._s(n.customer.customer_name))]}}]),model:{value:t.formData.working_id,callback:function(e){t.$set(t.formData,"working_id",e)},expression:"formData.working_id"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{autocomplete:"true",label:"ยอดจัด",type:"number",min:"0",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.finance_price,callback:function(e){t.$set(t.formData,"finance_price",e)},expression:"formData.finance_price"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"เงินดาวน์",type:"number",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.down,callback:function(e){t.$set(t.formData,"down",e)},expression:"formData.down"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"ราคาขายรถ",type:"number",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.car_price,callback:function(e){t.$set(t.formData,"car_price",e)},expression:"formData.car_price"}}),t._v(" "),n(D.a,{staticClass:"mt-3",attrs:{rows:"2",label:"รายละเอียด (ถ้ามี)",outlined:"",dense:"","hide-details":""},model:{value:t.formData.details,callback:function(e){t.$set(t.formData,"details",e)},expression:"formData.details"}})],1)],1),t._v(" "),n(c.a,{staticClass:"mt-3",attrs:{outlined:""}},[n(l.b,[n("h3",{staticClass:"mb-3"},[t._v("ข้อมูลการอนุมัติของแบงค์")]),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{autocomplete:"true",label:"ยอดจัด",type:"number",min:"0",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.bank_finance_price,callback:function(e){t.$set(t.formData,"bank_finance_price",e)},expression:"formData.bank_finance_price"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"เงินดาวน์",type:"number",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.bank_down,callback:function(e){t.$set(t.formData,"bank_down",e)},expression:"formData.bank_down"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"ราคาขายรถ",type:"number",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.bank_car_price,callback:function(e){t.$set(t.formData,"bank_car_price",e)},expression:"formData.bank_car_price"}}),t._v(" "),n(D.a,{staticClass:"mt-3",attrs:{rows:"2",label:"รายละเอียด (ถ้ามี)",outlined:"",dense:"","hide-details":""},model:{value:t.formData.bank_details,callback:function(e){t.$set(t.formData,"bank_details",e)},expression:"formData.bank_details"}})],1)],1),t._v(" "),n(c.a,{staticClass:"mt-3",attrs:{outlined:""}},[n(l.b,[n("h3",{staticClass:"mb-3"},[t._v("ข้อมูลการต่อรองราคา")]),t._v(" "),n(k.a,{attrs:{label:"ยอดจัด",type:"number",min:"0",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.negotiation_finance_price,callback:function(e){t.$set(t.formData,"negotiation_finance_price",e)},expression:"formData.negotiation_finance_price"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"เงินดาวน์",type:"number",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.negotiation_down,callback:function(e){t.$set(t.formData,"negotiation_down",e)},expression:"formData.negotiation_down"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"ราคาขายรถ",type:"number",outlined:"",dense:"","hide-details":"",rules:t.rule},model:{value:t.formData.negotiation_car_price,callback:function(e){t.$set(t.formData,"negotiation_car_price",e)},expression:"formData.negotiation_car_price"}}),t._v(" "),n(D.a,{staticClass:"mt-3",attrs:{rows:"2",label:"รายละเอียดการต่อรองราคา (ถ้ามี)",outlined:"",dense:"","hide-details":""},model:{value:t.formData.negotiation_details,callback:function(e){t.$set(t.formData,"negotiation_details",e)},expression:"formData.negotiation_details"}})],1)],1),t._v(" "),-1==t.user_group_permission&&"edit"==t.action?n(c.a,{staticClass:"mt-3",attrs:{outlined:""}},[n(l.b,[n("h3",{staticClass:"mb-3"},[t._v("ผลการต่อรอง")]),t._v(" "),n(k.a,{attrs:{label:"ยอดจัด",type:"number",min:"0",outlined:"",dense:"","hide-details":"",disabled:-1!=t.user_group_permission,rules:t.rule},model:{value:t.formData.negotiation_result_finance_price,callback:function(e){t.$set(t.formData,"negotiation_result_finance_price",e)},expression:"formData.negotiation_result_finance_price"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"เงินดาวน์",type:"number",outlined:"",dense:"","hide-details":"",disabled:-1!=t.user_group_permission,rules:t.rule},model:{value:t.formData.negotiation_result_down,callback:function(e){t.$set(t.formData,"negotiation_result_down",e)},expression:"formData.negotiation_result_down"}}),t._v(" "),n(k.a,{staticClass:"mt-3",attrs:{label:"ราคาขายรถ",type:"number",outlined:"",dense:"","hide-details":"",disabled:-1!=t.user_group_permission,rules:t.rule},model:{value:t.formData.negotiation_result_car_price,callback:function(e){t.$set(t.formData,"negotiation_result_car_price",e)},expression:"formData.negotiation_result_car_price"}}),t._v(" "),n(D.a,{staticClass:"mt-3",attrs:{rows:"2",label:"รายละเอียดผลการต่อรอง (ถ้ามี)",outlined:"",dense:"","hide-details":"",disabled:-1!=t.user_group_permission},model:{value:t.formData.negotiation_result_details,callback:function(e){t.$set(t.formData,"negotiation_result_details",e)},expression:"formData.negotiation_result_details"}})],1)],1):t._e()],1),t._v(" "),n(f.a),t._v(" "),n(l.a,[n(v.a),t._v(" "),n(o.a,{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("ยกเลิก")]),t._v(" "),n(o.a,{attrs:{type:"submit",color:"success darken-1",text:"",loading:t.formDataLoading}},[t._v("บันทึก ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);