(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{429:function(e,r,t){"use strict";t.d(r,"a",(function(){return l})),t.d(r,"b",(function(){return _}));var n=t(9),c=(t(48),t(98)),o=t.n(c),l="https://www.psnkp.co.th/server",d=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.$nuxt){e.next=4;break}return e.next=3,$nuxt.$auth.loggedIn;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.$nuxt){e.next=4;break}return e.next=3,window.$nuxt.$auth.getToken("local");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function _(e,r,t){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function e(r,t,data){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d()){e.next=9;break}return e.next=3,f();case 3:return e.t0=e.sent,n={Authorization:e.t0},e.next=7,o()({method:r,url:t,data:data,headers:n}).then((function(e){return e})).catch((function(e){if(401==e.response.status)return $nuxt.$auth.logout()}));case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},456:function(e,r,t){"use strict";t.d(r,"b",(function(){return c})),t.d(r,"a",(function(){return o})),t.d(r,"e",(function(){return l})),t.d(r,"f",(function(){return d})),t.d(r,"d",(function(){return f})),t.d(r,"c",(function(){return select}));var n=t(429),path="/api/car_model";function c(){var e=n.a+path;return Object(n.b)("get",e,{})}function o(e){var r=n.a+path+"/"+e;return Object(n.b)("delete",r,{})}function l(e){var r=n.a+path;return Object(n.b)("post",r,e)}function d(e,r){var t=n.a+path+"/"+e;return Object(n.b)("post",t,r)}function f(e){var r=n.a+path+"/"+e;return Object(n.b)("get",r,{})}function select(){var e=n.a+"/api/SelectOnCarModel";return Object(n.b)("get",e,{})}},469:function(e,r,t){"use strict";t.d(r,"b",(function(){return c})),t.d(r,"a",(function(){return o})),t.d(r,"f",(function(){return l})),t.d(r,"g",(function(){return d})),t.d(r,"e",(function(){return f})),t.d(r,"c",(function(){return select})),t.d(r,"d",(function(){return _}));var n=t(429),path="/api/car_series";function c(){var e=n.a+path;return Object(n.b)("get",e,{})}function o(e){var r=n.a+path+"/"+e;return Object(n.b)("delete",r,{})}function l(e){var r=n.a+path;return Object(n.b)("post",r,e)}function d(e,r){var t=n.a+path+"/"+e;return Object(n.b)("put",t,r)}function f(e){var r=n.a+path+"/"+e;return Object(n.b)("get",r,{})}function select(){var e=n.a+"/api/SelectOnCarSeries";return Object(n.b)("get",e,{})}function _(e,r){var t=n.a+"/api/SelectOnCarSerie/"+e+"/"+r;return Object(n.b)("post",t,{})}},481:function(e,r,t){"use strict";t.d(r,"b",(function(){return c})),t.d(r,"a",(function(){return o})),t.d(r,"f",(function(){return l})),t.d(r,"g",(function(){return d})),t.d(r,"e",(function(){return f})),t.d(r,"d",(function(){return _})),t.d(r,"c",(function(){return select}));var n=t(429),path="/api/car_serie_sub";function c(){var e=n.a+path;return Object(n.b)("get",e,{})}function o(e){var r=n.a+path+"/"+e;return Object(n.b)("delete",r,{})}function l(e){var r=n.a+path;return Object(n.b)("post",r,e)}function d(e,r){var t=n.a+path+"/"+e;return Object(n.b)("put",t,r)}function f(e){var r=n.a+path+"/"+e;return Object(n.b)("get",r,{})}function _(){var e=n.a+"/api/SelectOnCarSerieSubs";return Object(n.b)("get",e,{})}function select(e){var r=n.a+"/api/SelectOnCarSerieSub/"+e;return Object(n.b)("post",r,{})}},652:function(e,r,t){"use strict";t.d(r,"b",(function(){return c})),t.d(r,"a",(function(){return o})),t.d(r,"e",(function(){return l})),t.d(r,"f",(function(){return d})),t.d(r,"c",(function(){return f})),t.d(r,"d",(function(){return _}));var n=t(429),path="/api/low_cars";function c(){var e=n.a+path;return Object(n.b)("get",e,{})}function o(e){var r=n.a+path+"/"+e;return Object(n.b)("delete",r,{})}function l(e){var r=n.a+path;return Object(n.b)("post",r,e)}function d(e,r){var t=n.a+path+"/"+e;return Object(n.b)("put",t,r)}function f(e){var r=n.a+path+"/"+e;return Object(n.b)("get",r,{})}function _(){var e=n.a+"/api/showLowCars";return Object(n.b)("get",e,{})}},704:function(e,r,t){var content=t(767);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(13).default)("7a856e76",content,!0,{sourceMap:!1})},766:function(e,r,t){"use strict";t(704)},767:function(e,r,t){var n=t(12)(!1);n.push([e.i,".mx-input{font-size:17px;margin-top:1px;height:100%;border:1px solid #a7a2a2}",""]),e.exports=n},849:function(e,r,t){"use strict";t.r(r);var n=t(454),c=t(202),o=t(190),l=t(149),d=t(424),f=t(428),_=t(426),m=t(457),v=t(177),h=t(191),x=t(472),w=t(471),k=t(423),O=t(422),j=t(435),S=t(46),$=t(73),D=t(9),y=(t(48),t(652)),C=t(456),R=t(469),L=t(481),T={props:["dialog","action","id","formTitle"],data:function(){return{btnloading:!0,formDataLoading:!1,formData:{cars:[]},carModel:[],carSerie:[],carSerieSub:[],carSerie_all:[],carSerieSub_all:[],years:[],user_id:this.$auth.$storage.getLocalStorage("userData-id"),rule:[function(e){return!!e||"กรุณาใส่ข้อมูล"}],dialogDeleteComponent:!1}},mounted:function(){},methods:{onAction:function(e){var r=this;return Object(D.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.$refs.form.validate()){e.next=17;break}if("add"!=r.action){e.next=9;break}return e.next=4,y.e(r.formData);case 4:t=e.sent,r.$refs.form.reset(),200==t.status?r.$emit("success","Low_cars"):r.$emit("error","Low_cars"),e.next=15;break;case 9:if("edit"!=r.action){e.next=15;break}return e.next=12,y.f(r.id,r.formData);case 12:n=e.sent,r.$refs.form.reset(),200==n.status?r.$emit("success","Low_cars"):r.$emit("error","Low_cars");case 15:r.btnloading=!1,r.formDataLoading=!1;case 17:case"end":return e.stop()}}),e)})))()},getYearCurrent:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t,n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(t=(new Date).getFullYear(),n=t-50,i=t;i>=n;i--)e.years.push({value:i});e.$nextTick((function(){e.years.push({value:9999})}));case 4:case"end":return r.stop()}}),r)})))()},getCarModels:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.c();case 2:t=r.sent,e.carModel=t.data,e.loading=!1;case 5:case"end":return r.stop()}}),r)})))()},change_model:function(e,r){"add"==this.action&&(this.formData.cars[r].car_serie_id=null,this.formData.cars[r].car_serie_sub_id=null,this.formData.cars[r].years=null),this.formData.cars[r].data_car_serice=[],this.formData.cars[r].data_car_sub_serice=[];for(var t=0;t<this.carSerie_all.length;t++)this.carSerie_all[t].car_model_id==e&&this.formData.cars[r].data_car_serice.push(this.carSerie_all[t])},change_serie:function(e,r){this.formData.cars[r].data_car_sub_serice=[];for(var t=0;t<this.carSerieSub_all.length;t++)this.carSerieSub_all[t].car_serie_id==e&&this.formData.cars[r].data_car_sub_serice.push(this.carSerieSub_all[t])},getCarSeries:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,R.c();case 2:t=r.sent,e.carSerie_all=t.data;case 4:case"end":return r.stop()}}),r)})))()},getCarSerieSub:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L.d();case 2:t=r.sent,e.carSerieSub_all=t.data;case 4:case"end":return r.stop()}}),r)})))()},add_row:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.$nextTick((function(){var data={car_models_id:null,data_car_serice:[],car_serie_id:null,data_car_sub_serice:[],car_serie_sub_id:null,car_year:e.years,active:"1",years:null,number:0,user_id:e.user_id};e.formData.cars.push(data)}));case 1:case"end":return r.stop()}}),r)})))()},rm_row:function(e){var r=this;return Object(D.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.formData.cars.splice(e,1);case 1:case"end":return t.stop()}}),t)})))()}},watch:{dialog:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.dialogDeleteComponent=e.dialog,!e.dialogDeleteComponent){r.next=21;break}return r.next=4,e.getYearCurrent();case 4:return r.next=6,e.getCarModels();case 6:return r.next=8,e.getCarSeries();case 8:return r.next=10,e.getCarSerieSub();case 10:if("add"!=e.action){r.next=14;break}e.$nextTick((function(){e.$refs.form.reset();var r=e;e.$nextTick((function(){r.formData={cars:[{car_models_id:null,data_car_serice:[],car_serie_id:null,data_car_sub_serice:[],car_serie_sub_id:null,car_year:e.years,years:null,active:"1",number:0,user_id:e.user_id}]}}))})),r.next=21;break;case 14:if("edit"!=e.action){r.next=21;break}return e.formDataLoading=!0,r.next=18,y.c(e.id);case 18:t=r.sent,e.$nextTick((function(){e.$refs.form.reset();var r=e;e.$nextTick(Object(D.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data;case 2:r.formData=e.sent;case 3:case"end":return e.stop()}}),e)}))))})),e.formDataLoading=!1;case 21:e.btnloading=!1;case 22:case"end":return r.stop()}}),r)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}},M=(t(766),t(38)),component=Object(M.a)(T,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t(f.a,[t(_.a,{attrs:{"max-width":"90%"},model:{value:e.dialogDeleteComponent,callback:function(r){e.dialogDeleteComponent=r},expression:"dialogDeleteComponent"}},[t(o.a,[t(m.a,{ref:"form",attrs:{autocomplete:"true"},on:{submit:function(r){return r.preventDefault(),e.onAction(e.formData.id)}}},[t(S.a,{attrs:{color:"primary",dark:"",flat:""}},[t(c.a,{attrs:{icon:"",dark:""},on:{click:function(r){return e.$emit("cancleItem")}}},[t(v.a,[e._v("mdi-close")])],1),e._v(" "),t($.b,[e._v(" "+e._s(e.formTitle)+" ")]),e._v(" "),t(O.a),e._v(" "),t($.a,[t(c.a,{staticStyle:{"font-size":"18px"},attrs:{type:"submit",loading:e.btnloading,dark:"",text:""}},[e._v("\n              บันทึก\n            ")])],1)],1),e._v(" "),e.formDataLoading?t(h.a,{attrs:{indeterminate:"",color:"yellow darken-2"}}):e._e(),e._v(" "),t(l.b,[t(f.a,[t(k.a,{staticClass:"d-flex justify-center"},[t("h2",[e._v("รายการ")])]),e._v(" "),t("br"),e._v(" "),t("br"),e._v(" "),e._l(e.formData.cars,(function(r,o){return t("div",{key:o},[t(k.a,[t(d.a,{attrs:{cols:"2"}},[t(j.a,{attrs:{autocomplete:"true",type:"number",clearable:"",label:"เมื่อน้อยกว่า","append-icon":"",id:"cars.number",name:"cars.number",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:r.number,callback:function(t){e.$set(r,"number",t)},expression:"cars.number"}})],1),e._v(" "),t(d.a,{attrs:{cols:"5"}},[t(n.a,{attrs:{id:"cars.car_models_id",name:"cars.car_models_id",items:e.carModel,clearable:"","no-data-text":"ไม่มีข้อมูล","item-text":"car_model_name","item-value":"id",label:"ยี่ห้อ",outlined:"",dense:"","hide-details":"",rules:e.rule},on:{change:function(t){return e.change_model(r.car_models_id,o)}},model:{value:r.car_models_id,callback:function(t){e.$set(r,"car_models_id",t)},expression:"cars.car_models_id"}})],1),e._v(" "),t(d.a,{attrs:{cols:"5"}},[t(n.a,{attrs:{id:"cars.car_serie_id",name:"cars.car_serie_id",items:r.data_car_serice,"no-data-text":"ไม่มีข้อมูล",clearable:"","item-text":"car_series_name","item-value":"id",label:"รุ่นรถ",outlined:"",dense:"","hide-details":"",rules:e.rule},on:{change:function(t){return e.change_serie(r.car_serie_id,o)}},model:{value:r.car_serie_id,callback:function(t){e.$set(r,"car_serie_id",t)},expression:"cars.car_serie_id"}})],1),e._v(" "),t(d.a,{attrs:{cols:"3"}},[t(n.a,{attrs:{id:"cars.car_serie_sub_id",name:"cars.car_serie_sub_id",items:r.data_car_sub_serice,"no-data-text":"ไม่มีข้อมูล","item-text":"car_serie_sub_name","item-value":"id",label:"รุ่นย่อยรถ",clearable:"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:r.car_serie_sub_id,callback:function(t){e.$set(r,"car_serie_sub_id",t)},expression:"cars.car_serie_sub_id"}})],1),e._v(" "),t(d.a,{attrs:{cols:"2"}},[t(n.a,{attrs:{id:"cars.years",name:"cars.years",items:r.car_year,"item-text":"value","no-data-text":"ไม่มีข้อมูล","item-value":"value",label:"ปีผลิต (ค.ศ)",clearable:"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:r.years,callback:function(t){e.$set(r,"years",t)},expression:"cars.years"}})],1),e._v(" "),t(d.a,{attrs:{cols:"3"}},[t(w.a,{staticClass:"mt-2",attrs:{id:"cars.active",name:"cars.active",rules:[function(e){return!!e}],row:""},model:{value:r.active,callback:function(t){e.$set(r,"active",t)},expression:"cars.active"}},[[t("div",{staticClass:"mr-1"},[e._v("แสดง:")])],e._v(" "),t(x.a,{attrs:{label:"ใช่",value:"1"}}),e._v(" "),t(x.a,{attrs:{label:"ไม่",color:"red",value:"2"}})],2)],1),e._v(" "),"add"==e.action?t(d.a,{attrs:{cols:"1"}},[t(c.a,{attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(r){return e.rm_row(o)}}},[t(v.a,[e._v(" mdi-delete ")])],1)],1):e._e()],1)],1)})),e._v(" "),t("br"),e._v(" "),t(k.a,{staticClass:"d-flex"},["add"==e.action?t(d.a,[t(c.a,{attrs:{color:"green",dark:"",block:""},on:{click:function(r){return e.add_row()}}},[t(v.a,[e._v("mdi-plus")]),e._v(" เพิ่มรายการ\n                ")],1)],1):e._e()],1)],2)],1),e._v(" "),t(l.a,[t(O.a),e._v(" "),t(c.a,{attrs:{color:"red darken-1",text:""},on:{click:function(r){return e.$emit("cancleItem")}}},[e._v("ยกเลิก")]),e._v(" "),t(c.a,{attrs:{type:"submit",color:"success darken-1",text:"",loading:e.btnloading}},[e._v("บันทึก")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);