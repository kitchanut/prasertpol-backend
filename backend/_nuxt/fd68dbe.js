(window.webpackJsonp=window.webpackJsonp||[]).push([[249,104],{1021:function(t,e,r){"use strict";r.r(e);var n=r(14),o=(r(56),r(39),r(536)),c=r(462),l=r(623),d=r(497),m={components:{dialogNew:l.default,dialogImage:d.default},data:function(){return{serverUrl:"https://www.psnkp.co.th/server",loading:!0,id:"",search:"",dialog:!1,formTitle:"Add",dialogImg:!1,imgUrl:null,action:"add",headers:[{text:"รูปภาพ",value:"car_part_image",align:"center",width:"10%"},{text:"ประเภท",value:"car_part_types.car_part_type_name",width:"15%"},{text:"ชื่อ",value:"car_part_name",width:"15%"},{text:"รหัส",value:"car_part_code"},{text:"หน่วย",value:"unit.unit_name"},{text:"ราคาซื้อ",value:"car_part_price"},{text:"ราคาขาย",value:"car_part_buy"},{text:"ส่วนลด",value:"car_part_discount"},{text:"สถานะ",value:"car_part_active"},{text:"จัดการ",value:"actions",sortable:!1,width:"10%"}],data:[],user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission")}},mounted:function(){this.getData()},computed:{tHeader:function(){return this.headers.map((function(t){return t.text}))}},methods:{getData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b();case 2:r=e.sent,t.data=r.data,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},AddItem:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formTitle="เพิ่มข้อมูล",t.dialog=!0,t.id="",t.action="add";case 4:case"end":return e.stop()}}),e)})))()},editItem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.formTitle="แก้ไขข้อมูล",e.dialog=!0,e.id=t,e.action="edit";case 4:case"end":return r.stop()}}),r)})))()},addSuccess:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dialog=!1,t.$nextTick((function(){t.getData(),c.k()}));case 2:case"end":return e.stop()}}),e)})))()},addError:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dialog=!1,t.$nextTick((function(){t.getData(),c.j()}));case 2:case"end":return e.stop()}}),e)})))()},deleteItem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=c.a(),r.next=3,l.then((function(r){1==r&&o.a(t).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==r.status?c.k():c.j(),e.$nextTick((function(){e.getData()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 3:e.$nextTick((function(){e.getData()}));case 4:case"end":return r.stop()}}),r)})))()},showImg:function(t){this.dialogImg=!0,this.imgUrl=t}},watch:{}},f=m,v=r(42),_=r(51),h=r.n(_),x=r(196),w=r(210),k=r(191),D=r(158),I=r(451),R=r(930),y=r(147),T=r(156),V=r(456),j=r(84),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return-1==t.user_group_permission?r("div",[r("v-card",[r("v-card-title",[[r("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.AddItem()}}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n            เพิ่มรายการใหม่\n          ")],1)],t._v(" "),r("v-spacer"),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-text-field",{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],2),t._v(" "),r("v-data-table",{attrs:{headers:t.headers,items:t.data,"items-per-page":10,search:t.search,loading:t.loading,"no-data-text":"ยังไม่มีการเพิ่มข้อมูล","loading-text":"กำลัง\n      โหลดข้อมูลกรุณารอสักครู่"},scopedSlots:t._u([{key:"item.car_part_image",fn:function(e){var n=e.item;return[null!=n.car_part_image?r("v-btn",{attrs:{icon:""}},[r("v-avatar",{attrs:{size:"40"},on:{click:function(e){return t.showImg(t.serverUrl+"/"+n.car_part_image)}}},[r("v-img",{attrs:{src:t.serverUrl+"/"+n.car_part_image}})],1)],1):t._e()]}},{key:"item.car_part_price",fn:function(e){var r=e.item;return[t._v("\n          "+t._s(Number(r.car_part_price).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}))+"\n        ")]}},{key:"item.car_part_buy",fn:function(e){var r=e.item;return[t._v("\n          "+t._s(Number(r.car_part_buy).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}))+"\n        ")]}},{key:"item.car_part_discount",fn:function(e){var r=e.item;return[t._v("\n          "+t._s(Number(r.car_part_discount).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}))+"\n        ")]}},{key:"item.car_part_active",fn:function(e){return["1"==e.item.car_part_active?r("v-btn",{attrs:{"x-small":"",color:"success",dark:""}},[t._v("เปิดใช้งาน")]):r("v-btn",{attrs:{"x-small":"",color:"red",dark:""}},[t._v("ปิดการใช้งาน")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[r("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(e){return t.editItem(n.id)}}},[r("v-icon",[t._v(" mdi-pencil ")])],1),t._v(" "),r("v-btn",{attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(e){return t.deleteItem(n.id)}}},[r("v-icon",[t._v(" mdi-delete ")])],1)]}}],null,!0)}),t._v(" "),r("dialogNew",{attrs:{dialog:t.dialog,id:t.id,action:t.action,formTitle:t.formTitle},on:{cancleItem:function(e){t.dialog=!1},success:function(e){return t.addSuccess()},error:function(e){return t.addError()}}}),t._v(" "),r("dialogImage",{attrs:{dialog:t.dialogImg,imgUrl:t.imgUrl},on:{cancleItem:function(e){t.dialogImg=!1}}})],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports;h()(component,{VAvatar:x.a,VBtn:w.a,VCard:k.a,VCardTitle:D.c,VCol:I.a,VDataTable:R.a,VIcon:y.a,VImg:T.a,VSpacer:V.a,VTextField:j.a})},497:function(t,e,r){"use strict";r.r(e);var n=r(14),o=(r(56),{props:["dialog","imgUrl"],data:function(){return{dialogDeleteComponent:!1}},mounted:function(){},methods:{},watch:{dialog:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogDeleteComponent=t.dialog;case 1:case"end":return e.stop()}}),e)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}}),c=r(42),l=r(51),d=r.n(l),m=r(191),f=r(458),v=r(452),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-dialog",{attrs:{width:"600px"},model:{value:t.dialogDeleteComponent,callback:function(e){t.dialogDeleteComponent=e},expression:"dialogDeleteComponent"}},[r("v-card",[r("img",{attrs:{width:"600px",height:"auto",src:t.imgUrl}})])],1)],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{VCard:m.a,VContainer:f.a,VDialog:v.a})}}]);