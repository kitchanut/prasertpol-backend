(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{457:function(n,e,t){"use strict";t.d(e,"l",(function(){return f})),t.d(e,"m",(function(){return d})),t.d(e,"o",(function(){return m})),t.d(e,"g",(function(){return v})),t.d(e,"q",(function(){return _})),t.d(e,"e",(function(){return h})),t.d(e,"d",(function(){return w})),t.d(e,"f",(function(){return k})),t.d(e,"k",(function(){return y})),t.d(e,"j",(function(){return x})),t.d(e,"i",(function(){return B})),t.d(e,"a",(function(){return R})),t.d(e,"n",(function(){return T})),t.d(e,"b",(function(){return W})),t.d(e,"h",(function(){return A})),t.d(e,"p",(function(){return P})),t.d(e,"c",(function(){return L}));var r=t(14),o=(t(57),t(19),t(3)),c=t(209),l=t.n(c);t(267);function f(){o.default.swal({text:"ลำดับรถซ้ำ",icon:"error",confirmButtonText:"ตกลง",showCloseButton:!0})}function d(){o.default.swal({text:"ทะเบียนหรือจังหวัดซ้ำ",icon:"error",confirmButtonText:"ตกลง",showCloseButton:!0})}function m(){o.default.swal({title:"การแชร์ถูกยกเลิก !",text:"เนื่องจากรถยังไม่แสดงหน้าร้านหรือถูกขายออกไปแล้ว",icon:"warning",confirmButtonText:"ตกลง",showCloseButton:!0})}function v(){o.default.swal({text:"ชื่อผู้ใช้งานหรือรหัสผ่านผิด",icon:"warning",confirmButtonText:"ตกลง",showCloseButton:!0})}function _(){o.default.swal({text:"บัญชีนี้ไม่สามารถใช้งานฟังก์ชันนี้ได้",icon:"warning",confirmButtonText:"ตกลง",showCloseButton:!0})}function h(){o.default.swal({text:"ชื่อผู้ใช้งานซ้ำ",icon:"error",confirmButtonText:"ตกลง",showCloseButton:!0})}function w(){o.default.swal({text:"รหัสลับซ้ำกัน",icon:"error",confirmButtonText:"ตกลง",showCloseButton:!0})}function k(){o.default.swal({text:"คุณยังไม่ได้ไปรับอะไหล่",icon:"error",confirmButtonText:"ตกลง",showCloseButton:!0})}function y(){o.default.swal({position:"top-end",icon:"success",title:"สำเร็จ",showConfirmButton:!1,timer:1500})}function x(){o.default.swal({position:"top-end",icon:"error",title:"เกิดข้อผิดพลาด",showConfirmButton:!1,timer:1500})}function B(){return C.apply(this,arguments)}function C(){return(C=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ยืนยันการเรียกคืน ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ไม่",confirmButtonText:"ใช่"}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function R(){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ยืนยันการลบ ?",text:"ลบไปแล้วไม่สามารถกู้ข้อมูลกลับมาได้",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ไม่",confirmButtonText:"ลบ"}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function T(){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ข้อมูลยังไม่ครบ",text:"กรุณาใส่ข้อมูลที่เป็นสีแดง",icon:"error",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ยกเลิก",confirmButtonText:"ตกลง",showCloseButton:!0}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function W(){return M.apply(this,arguments)}function M(){return(M=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ยืนยันการอัพเดตสถานะ",text:"ทำการตรวจสอบข้อมูลครบเรียบร้อยแล้ว ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ไม่",confirmButtonText:"ใช่"}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function A(){return J.apply(this,arguments)}function J(){return(J=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ไม่สามารถปิดงานได้",text:"ยังมีรายการที่ทำไม่ครบ",icon:"error",showCancelButton:!1,showConfirmButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ยกเลิก",confirmButtonText:"ตกลง",showCloseButton:!0}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function P(){return V.apply(this,arguments)}function V(){return(V=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ไม่สามารถบันทึกได้",text:"กรุณาแนบไฟล์",icon:"error",showCancelButton:!1,showConfirmButton:!0,showDenyButton:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ยกเลิก",confirmButtonText:"ตกลง",showCloseButton:!0}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function L(){return D.apply(this,arguments)}function D(){return(D=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){n(o.default.swal({title:"ยืนยันรับรายการเข้าคลัง ?",text:"ทำการตรวจสอบข้อมูลครบเรียบร้อยแล้ว",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"ไม่",confirmButtonText:"ใช่"}).then((function(n){return n.isConfirmed})))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}o.default.use(l.a,{confirmButtonColor:"#41b882",cancelButtonColor:"#ff7674"})},506:function(n,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"j",(function(){return c})),t.d(e,"k",(function(){return l})),t.d(e,"i",(function(){return f})),t.d(e,"m",(function(){return d})),t.d(e,"h",(function(){return m})),t.d(e,"g",(function(){return v})),t.d(e,"b",(function(){return _})),t.d(e,"e",(function(){return h})),t.d(e,"f",(function(){return w})),t.d(e,"d",(function(){return k})),t.d(e,"c",(function(){return y})),t.d(e,"l",(function(){return x}));var r=t(454),path="/api/working";function o(){var n=r.a+"/api/working_allData";return Object(r.b)("get",n,{})}function c(n){var e=r.a+path;return Object(r.b)("post",e,n)}function l(n,e){var t=r.a+path+"/"+n;return Object(r.b)("put",t,e)}function f(n){var e=r.a+path+"/"+n;return Object(r.b)("get",e,{})}function d(n,e){var t=r.a+"/api/updateStatusWorking/"+n;return Object(r.b)("post",t,e)}function m(n){var e=r.a+"/api/workWhereClose";return Object(r.b)("post",e,n)}function v(n){var e=r.a+"/api/selectWhereCancle";return Object(r.b)("post",e,n)}function _(n){var e=r.a+"/api/work_cancel";return Object(r.b)("post",e,n)}function h(n){var e=r.a+"/api/get_work_cancel";return Object(r.b)("post",e,n)}function w(n){var e=r.a+"/api/working_search_id/"+n;return Object(r.b)("post",e,{})}function k(n){var e=r.a+"/api/followWork";return Object(r.b)("post",e,n)}function y(n){var e=r.a+"/api/followDown";return Object(r.b)("get",e,n)}function x(n,e){var t=r.a+"/api/updateNote/"+n;return Object(r.b)("post",t,e)}},921:function(n,e,t){"use strict";t.r(e);var r=t(14),o=(t(8),t(39),t(57),t(545)),c=t(506),l=t(457),f=t(646),d=t(511),m=t.n(d),v={components:{dialogReceivingMoney:f.default},data:function(){return{data:[],search:"",dataWorking:[],waitingPushdata:!1,search_number:"",idWork:0,dialogReceivingMoney:!1,formTitleReceivingMoney:"Add",actionReceivingMoney:"check",receivingMoney_type:1,headers:[{text:"ลำดับรถ",value:"car_no"},{text:"ประเภท",value:"receivingMoney_type_str"},{text:"เล่มที่",value:"book_no"},{text:"เลขที่",value:"number_no"},{text:"รายละเอียด",value:"car_regis"},{text:"จำนวน",value:"receiving_money_sum"},{text:"vat",value:"receiving_money_sum_vat"},{text:"รวม",value:"receiving_money_all"}]}},mounted:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.getReceiving_money(),n.getDataWork();case 2:case"end":return e.stop()}}),e)})))()},methods:{filterObject:function(n,e,t){return n.cars.car_no.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1||n.cars.car_regis.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},getDataWork:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a();case 2:t=e.sent,n.dataWorking=t.data.filter((function(n,e){return 1==n.status_del}));case 4:case"end":return e.stop()}}),e)})))()},ReceivingMoney:function(n,e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formTitleReceivingMoney=1==e?"เอกสารรับเงิน (ค่าตัวรถ)":2==e?"เอกสารรับเงิน (ค่าคอม)":"เอกสารรับเงิน (อื่นๆ)",t.idWork=n,t.receivingMoney_type=e,t.dialogReceivingMoney=!0,t.actionReceivingMoney="check";case 5:case"end":return r.stop()}}),r)})))()},getReceiving_money:function(){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,null!=n.idWork&&(t=n.idWork),e.next=4,o.b(t);case 4:r=e.sent,n.data=r.data,n.data.map((function(n){n.price=n.receiving_money_sum,n.receiving_money_sum_str==m()(n.receiving_money_sum)?n.check1="Ok":n.check1=" ",n.receiving_money_sum_vat_str==m()(n.receiving_money_sum_vat)?n.check2="Ok":n.check2=" ",n.receiving_money_all_str==m()(n.receiving_money_all)?n.check3="Ok":n.check3=" "}));case 7:case"end":return e.stop()}}),e)})))()},addSuccess:function(n){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"work"==n?e.dialogWork=!1:"Booking"==n?e.dialogBooking=!1:"Financial"==n?e.dialogFinancial=!1:"Contract"==n?e.dialogContract=!1:"Job"==n?e.dialogJobTechnician=!1:"Job_pathner"==n?e.dialogPathnerJobTechnician=!1:"Appointment"==n?e.dialogAppointment=!1:"AppointmentBank"==n?e.dialogAppointmentBank=!1:"InsurCertificate"==n?e.dialogInsurCertificate=!1:"Receiving_money"==n?e.dialogReceivingMoney=!1:"note"==n&&(e.dialogNote=!1),e.$nextTick((function(){e.getReceiving_money(),l.k()}));case 2:case"end":return t.stop()}}),t)})))()},addError:function(n){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"work"==n?e.dialogWork=!1:"Booking"==n?e.dialogBooking=!1:"Financial"==n?e.dialogFinancial=!1:"Contract"==n?e.dialogContract=!1:"Job"==n?e.dialogJobTechnician=!1:"Job_pathner"==n?e.dialogPathnerJobTechnician=!1:"Appointment"==n?e.dialogAppointment=!1:"AppointmentBank"==n?e.dialogAppointmentBank=!1:"InsurCertificate"==n?e.dialogInsurCertificate=!1:"Receiving_money"==n?e.dialogReceivingMoney=!1:"note"==n&&(e.dialogNote=!1),e.$nextTick((function(){e.getReceiving_money(),l.j()}));case 2:case"end":return t.stop()}}),t)})))()}},watch:{idWork:function(){null==this.idWork&&this.getReceiving_money()}}},_=t(42),h=t(52),w=t.n(h),k=t(472),y=t(210),x=t(192),B=t(157),C=t(445),R=t(914),O=t(450),T=t(451),j=t(86),component=Object(_.a)(v,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("v-card",[t("v-card-text",[t("v-row",{staticClass:"d-flex"},[t("v-col",{staticClass:"d-flex align-end",attrs:{xs:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[t("v-autocomplete",{attrs:{filter:n.filterObject,"no-data-text":"ไม่มีข้อมูล",items:n.dataWorking,"item-value":"id",label:"ค้นหาตามลำดับรถ",outlined:"",dense:"","hide-details":""},on:{change:function(e){return n.getReceiving_money()}},scopedSlots:n._u([{key:"selection",fn:function(e){var t=e.item;return[n._v("\n              W"+n._s(t.id)+" - "+n._s(t.cars.car_no)+" ("+n._s(t.cars.car_regis)+")\n            ")]}},{key:"item",fn:function(e){var t=e.item;return[n._v("\n              W"+n._s(t.id)+" - "+n._s(t.cars.car_no)+" ("+n._s(t.cars.car_regis)+")\n            ")]}}]),model:{value:n.idWork,callback:function(e){n.idWork=e},expression:"idWork"}})],1),n._v(" "),n.idWork?t("v-col",{staticClass:"d-flex align-end"},[t("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},on:{click:function(e){return n.ReceivingMoney(n.idWork,1)}}},[n._v("ใบกำกับค่าตัวรถ")]),n._v(" "),t("v-btn",{staticClass:"mr-2",attrs:{color:"warning"},on:{click:function(e){return n.ReceivingMoney(n.idWork,2)}}},[n._v("ใบกำกับค่าคอม")]),n._v(" "),t("v-btn",{attrs:{color:"success"},on:{click:function(e){return n.ReceivingMoney(n.idWork,3)}}},[n._v("อื่นๆ")])],1):n._e(),n._v(" "),t("v-spacer"),n._v(" "),t("v-col",{attrs:{xs:"12",sm:"12",md:"6",lg:"4",xl:"4"}},[t("v-text-field",{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":""},model:{value:n.search,callback:function(e){n.search=e},expression:"search"}})],1)],1),n._v(" "),t("br"),n._v(" "),t("v-data-table",{attrs:{headers:n.headers,items:n.data,search:n.search,"multi-sort":!0,dense:""},scopedSlots:n._u([{key:"item.car_regis",fn:function(e){var r=e.item;return[t("div",[n._v(n._s(r.car_model_name))]),n._v(" "),t("div",[n._v(n._s(r.car_regis))]),n._v(" "),t("div",[n._v(n._s(r.name_th))])]}},{key:"item.receiving_money_sum",fn:function(e){var r=e.item;return[t("div",[n._v(n._s(r.receiving_money_sum))]),n._v(" "),"Ok"==r.check1?t("div",[n._v(n._s(r.receiving_money_sum_str))]):t("div",{staticClass:"red--text"},[n._v(n._s(r.receiving_money_sum_str))])]}},{key:"item.receiving_money_sum_vat",fn:function(e){var r=e.item;return[t("div",[n._v(n._s(r.receiving_money_sum_vat))]),n._v(" "),"Ok"==r.check2?t("div",[n._v(n._s(r.receiving_money_sum_vat_str))]):t("div",{staticClass:"red--text"},[n._v(n._s(r.receiving_money_sum_vat_str))])]}},{key:"item.receiving_money_all",fn:function(e){var r=e.item;return[t("div",[n._v(n._s(r.receiving_money_all))]),n._v(" "),"Ok"==r.check3?t("div",[n._v(n._s(r.receiving_money_all_str))]):t("div",{staticClass:"red--text"},[n._v(n._s(r.receiving_money_all_str))])]}}],null,!0)})],1)],1),n._v(" "),t("dialogReceivingMoney",{attrs:{dialogReceivingMoney:n.dialogReceivingMoney,idWork:n.idWork,actionReceivingMoney:n.actionReceivingMoney,receivingMoney_type:n.receivingMoney_type,formTitleReceivingMoney:n.formTitleReceivingMoney},on:{cancleItem:function(e){n.dialogReceivingMoney=!1},success:n.addSuccess,error:n.addError}})],1)}),[],!1,null,null,null);e.default=component.exports;w()(component,{VAutocomplete:k.a,VBtn:y.a,VCard:x.a,VCardText:B.b,VCol:C.a,VDataTable:R.a,VRow:O.a,VSpacer:T.a,VTextField:j.a})}}]);