(window.webpackJsonp=window.webpackJsonp||[]).push([[220,16,90,147],{468:function(e,t,r){var n=r(58),o=r(272),c=r(69);e.exports=function(e,t,r,l){var d=String(c(e)),m=d.length,f=void 0===r?" ":String(r),v=n(t);if(v<=m||""==f)return d;var _=v-m,h=o.call(f,Math.ceil(_/f.length));return h.length>_&&(h=h.slice(0,_)),l?h+d:d+h}},478:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return select}));var n=r(459),path="/api/branches";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("post",r,t)}function m(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function select(){var e=n.a+"/api/SelectOnBranches";return Object(n.b)("get",e,{})}},480:function(e,t,r){"use strict";r.d(t,"i",(function(){return o})),r.d(t,"g",(function(){return c})),r.d(t,"p",(function(){return l})),r.d(t,"q",(function(){return d})),r.d(t,"m",(function(){return m})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return v})),r.d(t,"b",(function(){return _})),r.d(t,"o",(function(){return h})),r.d(t,"s",(function(){return x})),r.d(t,"a",(function(){return D})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return O})),r.d(t,"n",(function(){return j})),r.d(t,"h",(function(){return R})),r.d(t,"j",(function(){return $})),r.d(t,"r",(function(){return S}));var n=r(459),path="/api/car";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("put",r,t)}function m(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function f(){var e=n.a+"/api/SelectOnCarAll";return Object(n.b)("get",e,{})}function v(){var e=n.a+"/api/SelectAllCars";return Object(n.b)("get",e,{})}function _(){var e=n.a+"/api/SelectCarNo";return Object(n.b)("get",e,{})}function h(e){var t=n.a+"/api/StockOnCar";return Object(n.b)("post",t,e)}function x(e){var t=n.a+"/api/uploadImgCars";return Object(n.b)("post",t,e)}function D(e){var t=n.a+"/api/ImageCar/"+e;return Object(n.b)("post",t,{})}function k(e){var t=n.a+"/api/change_fist_img";return Object(n.b)("post",t,e)}function w(e){var t=n.a+"/api/deleteAllImgCar";return Object(n.b)("post",t,e)}function y(e){var t=n.a+"/api/deleteFolder";return Object(n.b)("post",t,e)}function O(e){var t=n.a+"/api/delete_img_car";return Object(n.b)("post",t,e)}function j(e){var t=n.a+"/api/showCar";return Object(n.b)("post",t,e)}function R(e,t){var r=n.a+"/api/getAllinfo/"+e+"/"+t;return Object(n.b)("get",r,{})}function $(e){var t=n.a+"/api/reRollCar/"+e;return Object(n.b)("get",t,{})}function S(){var e=n.a+"/api/update_amountPrice";return Object(n.b)("get",e,{})}},487:function(e,t,r){var n=r(20);n(n.S,"Math",{sign:r(273)})},489:function(e,t,r){"use strict";var n=r(20),o=r(468),c=r(271),l=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(c);n(n.P+n.F*l,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},527:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return select}));var n=r(459),path="/api/unit";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("put",r,t)}function m(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function select(){var e=n.a+"/api/SelectOnUnit";return Object(n.b)("get",e,{})}},536:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return select}));var n=r(459),path="/api/car_part";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("post",r,t)}function m(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function select(){var e=n.a+"/api/SelectOnCarParts";return Object(n.b)("get",e,{})}},549:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(130)),c=r.n(o),l=r(478),d={data:function(){return{timeSelect:this.$store.state.timeSelect,menuTimeStart:!1,menuTimeEnd:!1,selectTime:1,timeStart:c()().startOf("day").format("YYYY-MM-DD HH:mm"),timeEnd:c()().endOf("day").format("YYYY-MM-DD HH:mm"),branches:[],branch_id:this.$auth.$storage.getLocalStorage("userData-branch_id"),user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission")}},mounted:function(){this.getBranches()},methods:{returnDate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$emit("tineSelect",{branch_id:e.branch_id,timeStart:e.timeStart,timeEnd:e.timeEnd});case 1:case"end":return t.stop()}}),t)})))()},getBranches:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.c();case 2:return r=t.sent,e.branches=r.data,e.branches.push({id:0,branch_name:"ทั้งหมด"}),t.next=7,e.returnDate();case 7:case"end":return t.stop()}}),t)})))()},changeSelectTime:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:1==e?(t.timeStart=c()().startOf("day").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")):2==e?(t.timeStart=c()().startOf("day").add(-1,"days").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").add(-1,"days").format("YYYY-MM-DD HH:mm")):3==e?(t.timeStart=c()().startOf("day").add(-7,"days").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")):4==e?(t.timeStart=c()().startOf("day").add(-30,"days").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")):5==e?(t.timeStart=c()().startOf("months").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("months").format("YYYY-MM-DD HH:mm")):6==e?(t.timeStart=c()().add(-1,"months").startOf("months").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().add(-1,"months").endOf("months").format("YYYY-MM-DD HH:mm")):7==e?(t.timeStart=c()().add(-3,"months").startOf("months").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")):8==e?(t.timeStart=c()().add(-6,"months").startOf("months").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")):9==e?(t.timeStart=c()().startOf("years").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")):10==e&&(t.timeStart=c()().add(-3,"years").startOf("years").format("YYYY-MM-DD HH:mm"),t.timeEnd=c()().endOf("day").format("YYYY-MM-DD HH:mm")),t.returnDate();case 2:case"end":return r.stop()}}),r)})))()}}},m=r(42),f=r(51),v=r.n(f),_=r(473),h=r(451),x=r(929),D=r(200),k=r(455),w=r(84),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"pa-2"},[r("v-col",{directives:[{name:"show",rawName:"v-show",value:2!=e.user_group_permission,expression:"user_group_permission == 2 ? false : true"}],attrs:{cols:"3"}},[r("v-autocomplete",{attrs:{items:e.branches,"item-text":"branch_name","item-value":"id",label:"สาขา","no-data-text":"ไม่มีข้อมูล",outlined:"",dense:"","hide-details":""},on:{change:e.returnDate},model:{value:e.branch_id,callback:function(t){e.branch_id=t},expression:"branch_id"}})],1),e._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-autocomplete",{attrs:{items:e.timeSelect,"no-data-text":"ไม่มีข้อมูล","item-text":"title","item-value":"value",label:"ช่วงเวลา:",outlined:"",dense:"","hide-details":""},on:{change:e.changeSelectTime},model:{value:e.selectTime,callback:function(t){e.selectTime=t},expression:"selectTime"}})],1),e._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-menu",{ref:"menuTimeStart",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"วันที่เริ่มต้น","persistent-hint":"","prepend-icon":"",outlined:"",dense:"","hide-details":"","flathide-details":""},model:{value:e.timeStart,callback:function(t){e.timeStart=t},expression:"timeStart"}},"v-text-field",o,!1),n))]}}]),model:{value:e.menuTimeStart,callback:function(t){e.menuTimeStart=t},expression:"menuTimeStart"}},[e._v(" "),r("v-date-picker",{attrs:{locale:"th-TH","picker-date":""},on:{change:e.changeSelectTime,input:function(t){e.menuTimeStart=!1}},model:{value:e.timeStart,callback:function(t){e.timeStart=t},expression:"timeStart"}})],1)],1),e._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-menu",{ref:"menuTimeEnd",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"วันที่สิ้นสุด","persistent-hint":"","prepend-icon":"",outlined:"",dense:"","hide-details":"","flathide-details":""},model:{value:e.timeEnd,callback:function(t){e.timeEnd=t},expression:"timeEnd"}},"v-text-field",o,!1),n))]}}]),model:{value:e.menuTimeEnd,callback:function(t){e.menuTimeEnd=t},expression:"menuTimeEnd"}},[e._v(" "),r("v-date-picker",{attrs:{locale:"th-TH","picker-date":""},on:{change:e.changeSelectTime,input:function(t){e.menuTimeEnd=!1}},model:{value:e.timeEnd,callback:function(t){e.timeEnd=t},expression:"timeEnd"}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VAutocomplete:_.a,VCol:h.a,VDatePicker:x.a,VMenu:D.a,VRow:k.a,VTextField:w.a})},583:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(527)),c={props:["dialog","action","id","formTitle"],data:function(){return{btnloading:!0,formDataLoading:!1,formData:{},rule:[function(e){return!!e||"กรุณาใส่ข้อมูล"}],dialogDeleteComponent:!1}},mounted:function(){},methods:{onAction:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.$refs.form.validate()){r.next=19;break}if(t.btnloading=!0,t.formDataLoading=!0,"add"!=t.action){r.next=11;break}return r.next=6,o.e(t.formData);case 6:n=r.sent,t.$refs.form.reset(),200==n.status?t.$emit("success"):t.$emit("error"),r.next=17;break;case 11:if("edit"!=t.action){r.next=17;break}return r.next=14,o.f(e,t.formData);case 14:c=r.sent,t.$refs.form.reset(),200==c.status?t.$emit("success"):t.$emit("error");case 17:t.btnloading=!1,t.formDataLoading=!1;case 19:case"end":return r.stop()}}),r)})))()}},watch:{dialog:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogDeleteComponent=e.dialog,!e.$props.dialog){t.next=13;break}if("add"!=e.action){t.next=6;break}e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formData={unit_active:"1"};case 1:case"end":return e.stop()}}),e)}))))})),t.next=13;break;case 6:if("edit"!=e.action){t.next=13;break}return e.formDataLoading=!0,t.next=10,o.d(e.id);case 10:r=t.sent,e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.data;case 2:t.formData=e.sent;case 3:case"end":return e.stop()}}),e)}))))})),e.formDataLoading=!1;case 13:e.btnloading=!1;case 14:case"end":return t.stop()}}),t)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}},l=r(42),d=r(51),m=r.n(d),f=r(210),v=r(191),_=r(158),h=r(451),x=r(458),D=r(452),k=r(482),w=r(192),y=r(493),O=r(494),j=r(455),R=r(456),$=r(84),S=r(50),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{"max-width":"50%"},model:{value:e.dialogDeleteComponent,callback:function(t){e.dialogDeleteComponent=t},expression:"dialogDeleteComponent"}},[r("v-card",[r("v-form",{ref:"form",attrs:{autocomplete:"true"},on:{submit:function(t){return t.preventDefault(),e.onAction(e.formData.id)}}},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[e._v("\n          "+e._s(e.formTitle)+"\n        ")]),e._v(" "),e.formDataLoading?r("v-progress-linear",{attrs:{indeterminate:"",color:"yellow darken-2"}}):e._e(),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ชื่อหน่วย","append-icon":"",id:"formData.unit_name",name:"formData.unit_name",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.unit_name,callback:function(t){e.$set(e.formData,"unit_name",t)},expression:"formData.unit_name"}})],1)],1),e._v(" "),r("v-radio-group",{attrs:{id:"formData.unit_active",name:"formData.unit_active",rules:[function(e){return!!e}],row:""},model:{value:e.formData.unit_active,callback:function(t){e.$set(e.formData,"unit_active",t)},expression:"formData.unit_active"}},[[r("div",{staticClass:"mr-1"},[e._v("แสดงตอนเลือก:")])],e._v(" "),r("v-radio",{attrs:{label:"เปิดใช้งาน",value:"1"}}),e._v(" "),r("v-radio",{attrs:{label:"ปิดการใช้งาน",color:"red",value:"2"}})],2)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.$emit("cancleItem")}}},[e._v("ยกเลิก")]),e._v(" "),r("v-btn",{attrs:{type:"submit",color:"success darken-1",text:"",loading:e.btnloading}},[e._v("บันทึก")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VBtn:f.a,VCard:v.a,VCardActions:_.a,VCardText:_.b,VCol:h.a,VContainer:x.a,VDialog:D.a,VForm:k.a,VProgressLinear:w.a,VRadio:y.a,VRadioGroup:O.a,VRow:j.a,VSpacer:R.a,VTextField:$.a,VToolbar:S.a})},587:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return select}));var n=r(459),path="/api/partner_company";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("put",r,t)}function m(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function select(){var e=n.a+"/api/selectOnPartnerCompany";return Object(n.b)("get",e,{})}},607:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return f}));var n=r(459),path="/api/purchase";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("put",r,t)}function m(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function f(e){var t=n.a+"/api/purchase_where/"+e;return Object(n.b)("post",t,{})}},609:function(e,t,r){var content=r(655);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("26252f24",content,!0,{sourceMap:!1})},623:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(536)),c=r(608),l=r(527),d=r(688),m=r(624),f={props:["dialog","action","id","formTitle"],components:{selectAddCarPartType:d.default,selectAddUnit:m.default},data:function(){return{serverUrl:"https://www.psnkp.co.th/server/assets/images/car_parts/",btnloading:!0,formDataLoading:!1,formData:{},rule:[function(e){return!!e||"กรุณาใส่ข้อมูล"}],car_part_types:[],dataUnit:[],dialogDeleteComponent:!1,currentFile:null,imagePreviewURL:null}},mounted:function(){},methods:{selectFile:function(e){this.currentFile=e;var t=e;t?(this.imagePreviewURL=URL.createObjectURL(t),URL.revokeObjectURL(t)):this.imagePreviewURL=null},getCarTypes:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c();case 2:r=t.sent,e.car_part_types=r.data,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},getUnit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.c();case 2:r=t.sent,e.dataUnit=r.data,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},onAction:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.$refs.form.validate()){r.next=23;break}if(t.btnloading=!0,t.formDataLoading=!0,(data=new FormData).append("formData",JSON.stringify(t.formData)),data.append("Image",t.currentFile),"add"!=t.action){r.next=14;break}return r.next=9,o.e(data);case 9:n=r.sent,t.$refs.form.reset(),200==n.status?t.$emit("success"):t.$emit("error"),r.next=21;break;case 14:if("edit"!=t.action){r.next=21;break}return data.append("_method","PATCH"),r.next=18,o.f(e,data);case 18:c=r.sent,t.$refs.form.reset(),200==c.status?t.$emit("success"):t.$emit("error");case 21:t.btnloading=!1,t.formDataLoading=!1;case 23:case"end":return r.stop()}}),r)})))()},addSuccess:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("AddCarPartType"!=e){r.next=5;break}return r.next=3,t.getCarTypes();case 3:r.next=8;break;case 5:if("AddUnit"!=e){r.next=8;break}return r.next=8,t.getUnit();case 8:case"end":return r.stop()}}),r)})))()},addError:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("AddCarPartType"!=e){r.next=5;break}return r.next=3,t.getCarTypes();case 3:r.next=8;break;case 5:if("AddUnit"!=e){r.next=8;break}return r.next=8,t.getUnit();case 8:case"end":return r.stop()}}),r)})))()}},watch:{dialog:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogDeleteComponent=e.dialog,!e.$props.dialog){t.next=16;break}if(e.getCarTypes(),e.getUnit(),e.imagePreviewURL=null,"add"!=e.action){t.next=9;break}e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formData={car_part_active:"1"};case 1:case"end":return e.stop()}}),e)}))))})),t.next=16;break;case 9:if("edit"!=e.action){t.next=16;break}return e.formDataLoading=!0,t.next=13,o.d(e.id);case 13:r=t.sent,e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.data;case 2:t.formData=n.sent,null!=r.data.car_part_image&&(e.imagePreviewURL=e.serverUrl+r.data.id+"/"+r.data.car_part_image);case 4:case"end":return n.stop()}}),n)}))))})),e.formDataLoading=!1;case 16:e.btnloading=!1;case 17:case"end":return t.stop()}}),t)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}},v=r(42),_=r(51),h=r.n(_),x=r(473),D=r(210),k=r(191),w=r(158),y=r(451),O=r(458),j=r(452),R=r(580),$=r(482),S=r(156),C=r(192),V=r(493),Y=r(494),T=r(455),L=r(456),M=r(84),P=r(50),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{"max-width":"50%"},model:{value:e.dialogDeleteComponent,callback:function(t){e.dialogDeleteComponent=t},expression:"dialogDeleteComponent"}},[r("v-card",[r("v-form",{ref:"form",attrs:{autocomplete:"true"},on:{submit:function(t){return t.preventDefault(),e.onAction(e.formData.id)}}},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[e._v("\n          "+e._s(e.formTitle)+"\n        ")]),e._v(" "),e.formDataLoading?r("v-progress-linear",{attrs:{indeterminate:"",color:"yellow darken-2"}}):e._e(),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{id:"formData.car_part_type_id",name:"formData.car_part_type_id",items:e.car_part_types,"item-text":"car_part_type_name","item-value":"id",label:"ประเภทอะไหล่",outlined:"",dense:"","hide-details":"","no-data-text":"ไม่มีข้อมูล",rules:e.rule},scopedSlots:e._u([{key:"append-item",fn:function(){return[r("selectAddCarPartType",{on:{success:e.addSuccess,error:e.addError}})]},proxy:!0}]),model:{value:e.formData.car_part_type_id,callback:function(t){e.$set(e.formData,"car_part_type_id",t)},expression:"formData.car_part_type_id"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ชื่อ","append-icon":"",id:"formData.car_part_name",name:"formData.car_part_name",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_name,callback:function(t){e.$set(e.formData,"car_part_name",t)},expression:"formData.car_part_name"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-autocomplete",{attrs:{id:"formData.unit_id",name:"formData.unit_id",items:e.dataUnit,"item-text":"unit_name","item-value":"id","no-data-text":"ไม่มีข้อมูล",label:"หน่วย",outlined:"",dense:"","hide-details":"",rules:e.rule},scopedSlots:e._u([{key:"append-item",fn:function(){return[r("selectAddUnit",{on:{success:e.addSuccess,error:e.addError}})]},proxy:!0}]),model:{value:e.formData.unit_id,callback:function(t){e.$set(e.formData,"unit_id",t)},expression:"formData.unit_id"}})],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"รหัส","append-icon":"",id:"formData.car_part_code",name:"formData.car_part_code",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_code,callback:function(t){e.$set(e.formData,"car_part_code",t)},expression:"formData.car_part_code"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ราคาซื้อ","append-icon":"",id:"formData.car_part_price",name:"formData.car_part_price",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_price,callback:function(t){e.$set(e.formData,"car_part_price",t)},expression:"formData.car_part_price"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ราคาขาย","append-icon":"",id:"formData.car_part_buy",name:"formData.car_part_buy",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_buy,callback:function(t){e.$set(e.formData,"car_part_buy",t)},expression:"formData.car_part_buy"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ส่วนลด","append-icon":"",id:"formData.car_part_discount",name:"formData.car_part_discount",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_discount,callback:function(t){e.$set(e.formData,"car_part_discount",t)},expression:"formData.car_part_discount"}})],1)],1),e._v(" "),r("v-radio-group",{attrs:{id:"formData.car_part_active",name:"formData.car_part_active",rules:e.rule,row:""},model:{value:e.formData.car_part_active,callback:function(t){e.$set(e.formData,"car_part_active",t)},expression:"formData.car_part_active"}},[[r("div",{staticClass:"mr-1"},[e._v("แสดงตอนเลือก:")])],e._v(" "),r("v-radio",{attrs:{label:"เปิดใช้งาน",value:"1"}}),e._v(" "),r("v-radio",{attrs:{label:"ปิดการใช้งาน",color:"red",value:"2"}})],2),e._v(" "),r("div",{staticClass:"d-flex flex-column justify-center"},[r("v-file-input",{attrs:{accept:"image/*","show-size":"",label:null==e.currentFile||null==e.imagePreviewURL?"เลือกรูปภาพ":"เลือกรูปใหม่"},on:{change:e.selectFile}}),e._v(" "),null!=e.currentFile||null!=e.imagePreviewURL?r("v-img",{attrs:{contain:"",height:"250px",src:e.imagePreviewURL}}):e._e()],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.$emit("cancleItem")}}},[e._v("ยกเลิก")]),e._v(" "),r("v-btn",{attrs:{type:"submit",color:"success darken-1",text:"",loading:e.btnloading}},[e._v("บันทึก")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VAutocomplete:x.a,VBtn:D.a,VCard:k.a,VCardActions:w.a,VCardText:w.b,VCol:y.a,VContainer:O.a,VDialog:j.a,VFileInput:R.a,VForm:$.a,VImg:S.a,VProgressLinear:C.a,VRadio:V.a,VRadioGroup:Y.a,VRow:T.a,VSpacer:L.a,VTextField:M.a,VToolbar:P.a})},624:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(462)),c={components:{dialogNew:r(583).default},data:function(){return{formTitle:"เพิ่มข้อมูล",dialog:!1,id:"",action:"add"}},mounted:function(){},methods:{AddItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formTitle="เพิ่มข้อมูล",e.dialog=!0,e.id="",e.action="add";case 4:case"end":return t.stop()}}),t)})))()},addSuccess:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,e.$nextTick((function(){e.$emit("success","AddUnit"),o.k()}));case 3:case"end":return t.stop()}}),t)})))()},addError:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,e.$nextTick((function(){e.$emit("error","AddUnit"),o.j()}));case 3:case"end":return t.stop()}}),t)})))()}}},l=r(42),d=r(51),m=r.n(d),f=r(123),v=r(32),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-list-item",{on:{click:function(t){return e.AddItem()}}},[r("v-list-item-content",[r("v-list-item-title",{staticStyle:{color:"#1976d2"}},[e._v("\n        + เพิ่มข้อมูลใหม่\n      ")])],1)],1),e._v(" "),r("dialogNew",{attrs:{dialog:e.dialog,id:e.id,action:e.action,formTitle:e.formTitle},on:{cancleItem:function(t){e.dialog=!1},success:function(t){return e.addSuccess()},error:function(t){return e.addError()}}})],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VListItem:f.a,VListItemContent:v.a,VListItemTitle:v.c})},640:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(462)),c={components:{dialogNew:r(623).default},data:function(){return{formTitle:"เพิ่มข้อมูล",dialog:!1,id:"",action:"add"}},methods:{AddItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formTitle="เพิ่มข้อมูล",e.dialog=!0,e.id="",e.action="add";case 4:case"end":return t.stop()}}),t)})))()},addSuccess:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,e.$nextTick((function(){e.$emit("success","AddCarPart"),o.k()}));case 3:case"end":return t.stop()}}),t)})))()},addError:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,e.$nextTick((function(){e.$emit("error","AddCarPart"),o.j()}));case 3:case"end":return t.stop()}}),t)})))()}}},l=r(42),d=r(51),m=r.n(d),f=r(123),v=r(32),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-list-item",{on:{click:function(t){return e.AddItem()}}},[r("v-list-item-content",[r("v-list-item-title",{staticStyle:{color:"#1976d2"}},[e._v("\n        + เพิ่มข้อมูลใหม่\n      ")])],1)],1),e._v(" "),r("dialogNew",{attrs:{dialog:e.dialog,id:e.id,action:e.action,formTitle:e.formTitle},on:{cancleItem:function(t){e.dialog=!1},success:function(t){return e.addSuccess()},error:function(t){return e.addError()}}})],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VListItem:f.a,VListItemContent:v.a,VListItemTitle:v.c})},654:function(e,t,r){"use strict";r(609)},655:function(e,t,r){var n=r(11)(!1);n.push([e.i,".v-input--selection-controls{margin-top:0!important;padding-top:0!important}",""]),e.exports=n},662:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(17),r(56),r(607)),c=r(536),l=r(478),d=r(587),m=r(462),f=r(527),v=r(480),_={props:["dialog","action","id","formTitle"],components:{selectAddCarPart:r(640).default},data:function(){return{btnloading:!0,formDataLoading:!1,menuDateBuy:!1,formData:{purchase_details:[{}]},ShowBotton:!0,carParts:[],rule:[function(e){return!!e||"กรุณาใส่ข้อมูล"}],dialogDeleteComponent:!1,dataCar:[],getDataCar:[],type:[{id:1,name:"คลัง"},{id:2,name:"รถ"}],partner:[],branch:[],dataUnit:[],selectPartner:"",selectBranch:"",isReadonly:!1,disabledInputCar:!1}},mounted:function(){},methods:{filterObject:function(e,t,r){return e.car_no.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1||e.car_regis.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},getCars:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.l();case 2:r=t.sent,e.dataCar=r.data;case 4:case"end":return t.stop()}}),t)})))()},getUnit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b();case 2:r=t.sent,e.dataUnit=r.data;case 4:case"end":return t.stop()}}),t)})))()},getCarParts:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c();case 2:r=t.sent,e.carParts=r.data;case 4:case"end":return t.stop()}}),t)})))()},getBranch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.c();case 2:r=t.sent,e.branch=r.data;case 4:case"end":return t.stop()}}),t)})))()},getPartner:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.c();case 2:r=t.sent,e.partner=r.data;case 4:case"end":return t.stop()}}),t)})))()},SelectBranchs:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formData.company_name="",t.formData.branch_tel="",t.formData.company_idvat="",t.formData.company_address="",t.$nextTick((function(){for(var r=0;r<t.branch.length;r++)if(t.branch[r].id==e){t.branch[r].id==e&&(t.formData.company_name=t.branch[r].company_name,t.formData.branch_tel=t.branch[r].branch_tel,t.formData.company_idvat=t.branch[r].company_idvat,t.formData.company_address=t.branch[r].company_address);break}}));case 5:case"end":return r.stop()}}),r)})))()},SelectPartners:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formData.partner_companie_name="",t.formData.partner_companie_tel="",t.formData.partner_companie_idvat="",t.formData.partner_companie_address="",n=0;case 5:if(!(n<t.partner.length)){r.next=15;break}if(t.partner[n].id!=e){r.next=12;break}return t.formData.partner_companie_name=t.partner[n].partner_companie_name,t.formData.partner_companie_tel=t.partner[n].partner_companie_tel,t.formData.partner_companie_idvat=t.partner[n].partner_companie_idvat,t.formData.partner_companie_address=t.partner[n].partner_companie_address,r.abrupt("break",15);case 12:n++,r.next=5;break;case 15:case"end":return r.stop()}}),r)})))()},onAction:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.$refs.form.validate()){r.next=17;break}if(t.btnloading=!0,t.formDataLoading=!0,"add"!=t.action){r.next=11;break}return r.next=6,o.e(t.formData);case 6:c=r.sent,t.$refs.form.reset(),200==c.status?t.$emit("success"):t.$emit("error"),r.next=15;break;case 11:if("edit"!=t.action){r.next=15;break}return l=m.c(),r.next=15,l.then(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(1!=n){r.next=6;break}return r.next=3,o.f(e,t.formData);case 3:c=r.sent,t.$refs.form.reset(),200==c.status?t.$emit("success"):t.$emit("error");case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 15:t.btnloading=!1,t.formDataLoading=!1;case 17:case"end":return r.stop()}}),r)})))()},fuctionSumValue:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n=[],t.formData.purchase_details[e].sumValue=Number(t.formData.purchase_details[e].car_part_price)*Number(t.formData.purchase_details[e].car_part_amount),o=0;o<t.formData.purchase_details.length;o++)n.push(t.formData.purchase_details[o].sumValue);t.formData.sumValueAll=n.reduce((function(e,t){return e+t}),0);case 4:case"end":return r.stop()}}),r)})))()},addSuccess:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("AddCarPart"!=e){r.next=5;break}return r.next=3,t.getCarParts();case 3:return r.next=5,t.getUnit();case 5:case"end":return r.stop()}}),r)})))()},addError:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("AddCarPart"!=e){r.next=5;break}return r.next=3,t.getCarParts();case 3:return r.next=5,t.getUnit();case 5:case"end":return r.stop()}}),r)})))()},selectCarPart:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.formData.purchase_details[t].car_part_price="",r.formData.purchase_details[t].unit_name="",r.formData.purchase_details[t].car_part_amount="",r.formData.purchase_details[t].sumValue="",o=0;case 5:if(!(o<r.carParts.length)){n.next=19;break}if(r.carParts[o].id!=e){n.next=16;break}c=0;case 8:if(!(c<r.dataUnit.length)){n.next=16;break}if(r.dataUnit[c].id!=r.carParts[o].unit_id){n.next=13;break}return r.formData.purchase_details[t].unit_name=r.dataUnit[c].unit_name,r.formData.purchase_details[t].car_part_price=r.carParts[o].car_part_price,n.abrupt("break",16);case 13:c++,n.next=8;break;case 16:o++,n.next=5;break;case 19:case"end":return n.stop()}}),n)})))()},add_row:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:data={type:1,car_id:"",unit_name:"",car_part_id:"",car_part_price:"",car_part_amount:"",sumValue:""},e.formData.purchase_details.push(data);case 2:case"end":return t.stop()}}),t)})))()},rm_row:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formData.purchase_details.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()}},watch:{dialog:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogDeleteComponent=e.dialog,!e.dialogDeleteComponent){t.next=25;break}return e.formDataLoading=!0,e.getCarParts(),t.next=6,e.getBranch();case 6:if(e.getPartner(),e.getUnit(),e.getCars(),e.loading=!1,"add"!=e.action){t.next=16;break}e.ShowBotton=!0,e.isReadonly=!1,e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formData={po_number:"PO-"+(new Date).getTime(),branch_id:e.$auth.$storage.getLocalStorage("userData-branch_id"),user_id:e.$auth.$storage.getLocalStorage("userData-id"),po_active:1,purchase_details:[{type:1,car_id:"",unit_name:"",car_part_id:"",car_part_price:"",car_part_amount:"",sumValue:""}]};case 1:case"end":return r.stop()}}),r)}))))})),t.next=23;break;case 16:if("edit"!=e.action&&"history"!=e.action){t.next=23;break}return e.ShowBotton=!1,e.isReadonly=!0,t.next=21,o.d(e.id);case 21:r=t.sent,e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.data;case 2:t.formData=n.sent,t.formData.po_active=2,t.formData.user_id=e.$auth.$storage.getLocalStorage("userData-id"),t.selectPartner=1;case 6:case"end":return n.stop()}}),n)}))))}));case 23:e.$nextTick((function(){e.selectBranch=1,e.SelectBranchs(1)})),e.formDataLoading=!1;case 25:e.btnloading=!1;case 26:case"end":return t.stop()}}),t)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}},h=_,x=(r(654),r(42)),D=r(51),k=r.n(D),w=r(473),y=r(210),O=r(191),j=r(158),R=r(451),$=r(458),S=r(929),C=r(452),V=r(86),Y=r(482),T=r(147),L=r(200),M=r(192),P=r(455),H=r(456),A=r(84),E=r(50),B=r(91),component=Object(x.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{"content-class":"v-dialog--custom"},model:{value:e.dialogDeleteComponent,callback:function(t){e.dialogDeleteComponent=t},expression:"dialogDeleteComponent"}},[r("v-card",[r("v-form",{ref:"form",attrs:{autocomplete:"true",readonly:e.isReadonly},on:{submit:function(t){return t.preventDefault(),e.onAction(e.formData.id)}}},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.$emit("cancleItem")}}},[r("v-icon",[e._v("mdi-close")])],1),e._v(" "),r("v-toolbar-title",[e._v(" "+e._s(e.formTitle)+" ")]),e._v(" "),r("v-spacer"),e._v(" "),"history"!=this.action?r("v-toolbar-items",[r("v-btn",{staticStyle:{"font-size":"18px"},attrs:{type:"submit",loading:e.btnloading,dark:"",text:""}},[e._v("\n              "+e._s("add"==this.action?"บันทึก":"รับเข้าคลัง")+"\n            ")])],1):e._e()],1),e._v(" "),e.formDataLoading?r("v-progress-linear",{attrs:{indeterminate:"",color:"yellow darken-2"}}):e._e(),e._v(" "),r("v-card-text",[r("v-fab-transition",[r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.ShowBotton,expression:"ShowBotton"}],staticStyle:{bottom:"20px"},attrs:{color:"green",fab:"",dark:"",absolute:"",right:""},on:{click:function(t){return e.add_row()}}},[r("v-icon",[e._v("mdi-plus")])],1)],1),e._v(" "),r("v-container",[r("v-row",{staticClass:"d-flex justify-center"},[r("h2",[e._v("ใบสั่งซื้ออะไหล่")])]),e._v(" "),r("br"),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"8"}}),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"เลขใบเสร็จ","append-icon":"",id:"formData.po_number",name:"formData.po_number",outlined:"",readonly:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.po_number,callback:function(t){e.$set(e.formData,"po_number",t)},expression:"formData.po_number"}}),e._v(" "),r("v-spacer",{staticClass:"ma-3"}),e._v(" "),r("v-menu",{ref:"menuDateBuy",attrs:{id:"menuDateBuy",name:"menuDateBuy","close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{autocomplete:"true",id:"formData.po_date",name:"formData.po_date",label:"วันที่สั่งซื้อ","persistent-hint":"","prepend-icon":"",outlined:"",dense:"","hide-details":"",flat:"",rules:e.rule,clearable:""},model:{value:e.formData.po_date,callback:function(t){e.$set(e.formData,"po_date",t)},expression:"formData.po_date"}},"v-text-field",o,!1),n))]}}]),model:{value:e.menuDateBuy,callback:function(t){e.menuDateBuy=t},expression:"menuDateBuy"}},[e._v(" "),r("v-date-picker",{attrs:{id:"formData.po_date",name:"formData.po_date",locale:"th-TH","picker-date":""},on:{input:function(t){e.menuDateBuy=!1}},model:{value:e.formData.po_date,callback:function(t){e.$set(e.formData,"po_date",t)},expression:"formData.po_date"}})],1)],1)],1),e._v(" "),r("v-row",{staticClass:"d-flex"},[r("v-col",[r("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:e.ShowBotton,expression:"ShowBotton"}],attrs:{readonly:"",id:"selectBranch",name:"selectBranch",items:e.branch,"item-text":"branch_name","no-data-text":"ไม่มีข้อมูล","item-value":"id",label:"ซื้อในนามสาขา",outlined:"",dense:"","hide-details":"",rules:e.rule},on:{change:e.SelectBranchs},model:{value:e.selectBranch,callback:function(t){e.selectBranch=t},expression:"selectBranch"}})],1),e._v(" "),r("v-col",[r("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:e.ShowBotton,expression:"ShowBotton"}],attrs:{id:"selectPartner",name:"selectPartner",items:e.partner,"item-text":"partner_companie_name","item-value":"id",label:"บริษัทคู่ค้า","no-data-text":"ไม่มีข้อมูล",outlined:"",dense:"","hide-details":"",rules:e.rule},on:{change:e.SelectPartners},model:{value:e.selectPartner,callback:function(t){e.selectPartner=t},expression:"selectPartner"}})],1)],1),e._v(" "),r("v-row",{staticClass:"d-flex"},[r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"ซื้อในนาม",id:"formData.company_name",name:"formData.company_name","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.company_name,callback:function(t){e.$set(e.formData,"company_name",t)},expression:"formData.company_name"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"ซื้อสินค้าจากบริษัท",id:"formData.partner_companie_name",name:"formData.partner_companie_name","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.partner_companie_name,callback:function(t){e.$set(e.formData,"partner_companie_name",t)},expression:"formData.partner_companie_name"}})],1)],1),e._v(" "),r("v-row",{staticClass:"d-flex"},[r("v-col",[r("v-row",{staticClass:"d-flex"},[r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"เบอร์ติดต่อ",id:"formData.branch_tel",name:"formData.branch_tel","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.branch_tel,callback:function(t){e.$set(e.formData,"branch_tel",t)},expression:"formData.branch_tel"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"เลขผู้เสียภาษี",id:"formData.company_idvat",name:"formData.company_idvat","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.company_idvat,callback:function(t){e.$set(e.formData,"company_idvat",t)},expression:"formData.company_idvat"}})],1)],1)],1),e._v(" "),r("v-col",[r("v-row",{staticClass:"d-flex"},[r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"เบอร์ติดต่อ",id:"formData.partner_companie_tel",name:"formData.partner_companie_tel","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.partner_companie_tel,callback:function(t){e.$set(e.formData,"partner_companie_tel",t)},expression:"formData.partner_companie_tel"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"เลขผู้เสียภาษี",id:"formData.partner_companie_idvat",name:"formData.partner_companie_idvat","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.partner_companie_idvat,callback:function(t){e.$set(e.formData,"partner_companie_idvat",t)},expression:"formData.partner_companie_idvat"}})],1)],1)],1)],1),e._v(" "),r("v-row",{staticClass:"d-flex"},[r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"ที่อยู่",id:"formData.company_address",name:"formData.company_address","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.company_address,callback:function(t){e.$set(e.formData,"company_address",t)},expression:"formData.company_address"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{autocomplete:"true",label:"ที่อยู่",id:"formData.partner_companie_address",name:"formData.partner_companie_address","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.partner_companie_address,callback:function(t){e.$set(e.formData,"partner_companie_address",t)},expression:"formData.partner_companie_address"}})],1)],1),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("v-row",{staticClass:"d-flex justify-center"},[r("h2",[e._v("รายการสั่งซื้อ")])]),e._v(" "),r("br"),e._v(" "),e._l(e.formData.purchase_details,(function(t,n){return r("v-row",{key:n,staticClass:"mt-2"},[r("v-col",{attrs:{cols:"2"}},[r("v-autocomplete",{attrs:{id:"purchase_detail.type",name:"purchase_detail.type",items:e.type,"item-text":"name","item-value":"id",label:"ประเภท","no-data-text":"ไม่มีข้อมูล",outlined:"",dense:"","hide-details":""},model:{value:t.type,callback:function(r){e.$set(t,"type",r)},expression:"purchase_detail.type"}})],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[1==e.formData.purchase_details[n].type?r("v-text-field",{attrs:{autocomplete:"true",label:"ไม่ต้องเลือก",disabled:"","append-icon":"",outlined:"",dense:"","hide-details":""}}):e._e(),e._v(" "),2==e.formData.purchase_details[n].type?r("v-autocomplete",{attrs:{id:"purchase_detail.car_id",name:"purchase_detail.car_id",items:e.dataCar,"item-text":"car_no","item-value":"id",label:"ลำดับรถ","no-data-text":"ไม่มีข้อมูล",filter:e.filterObject,outlined:"",dense:"","hide-details":""},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item;return[e._v("\n                    "+e._s(r.car_no)+" ("+e._s(r.car_regis)+")\n                  ")]}},{key:"item",fn:function(t){var r=t.item;return[e._v("\n                    "+e._s(r.car_no)+" ("+e._s(r.car_regis)+")\n                  ")]}}],null,!0),model:{value:t.car_id,callback:function(r){e.$set(t,"car_id",r)},expression:"purchase_detail.car_id"}}):e._e()],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-autocomplete",{attrs:{id:"purchase_detail.car_part_id",name:"purchase_detail.car_part_id",items:e.carParts,"item-text":"car_part_name","item-value":"id",label:"อะไหล่",outlined:"","no-data-text":"ไม่มีข้อมูล",dense:"","hide-details":"",rules:e.rule},on:{change:function(r){return e.selectCarPart(t.car_part_id,n)}},scopedSlots:e._u([{key:"append-item",fn:function(){return[r("selectAddCarPart",{on:{success:e.addSuccess,error:e.addError}})]},proxy:!0}],null,!0),model:{value:t.car_part_id,callback:function(r){e.$set(t,"car_part_id",r)},expression:"purchase_detail.car_part_id"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-text-field",{attrs:{autocomplete:"true",id:"purchase_detail.car_part_amount",name:"purchase_detail.car_part_amount",readonly:null==t.car_part_id,type:"number",label:"จำนวน","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},on:{change:function(t){return e.fuctionSumValue(n)}},model:{value:t.car_part_amount,callback:function(r){e.$set(t,"car_part_amount",r)},expression:"purchase_detail.car_part_amount"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-text-field",{attrs:{autocomplete:"true",id:"purchase_detail.unit_name",name:"purchase_detail.unit_name",label:"หน่วย",readonly:"","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:t.unit_name,callback:function(r){e.$set(t,"unit_name",r)},expression:"purchase_detail.unit_name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ราคาต่อหน่วย",readonly:null==t.car_part_id,id:"purchase_detail.car_part_price",name:"purchase_detail.car_part_price",type:"number","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},on:{change:function(t){return e.fuctionSumValue(n)}},model:{value:t.car_part_price,callback:function(r){e.$set(t,"car_part_price",r)},expression:"purchase_detail.car_part_price"}})],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-text-field",{attrs:{autocomplete:"true",id:"purchase_detail.sumValue",name:"purchase_detail.sumValue",label:"รวม",readonly:"","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:t.sumValue,callback:function(r){e.$set(t,"sumValue",r)},expression:"purchase_detail.sumValue"}})],1),e._v(" "),r("v-col",{directives:[{name:"show",rawName:"v-show",value:e.ShowBotton,expression:"ShowBotton"}],attrs:{cols:"1"}},[r("v-btn",{staticClass:"mt-1",attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(t){return e.rm_row(n)}}},[r("v-icon",[e._v(" mdi-delete ")])],1)],1)],1)})),e._v(" "),r("v-row",{staticClass:"d-flex"},[r("v-col",{attrs:{cols:"9"}}),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-text-field",{attrs:{autocomplete:"true",id:"formData.sumValueAll",name:"formData.sumValueAll",readonly:"",type:"number",label:"รวมราคาทั้งหมด","append-icon":"",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.sumValueAll,callback:function(t){e.$set(e.formData,"sumValueAll",t)},expression:"formData.sumValueAll"}})],1),e._v(" "),r("v-col",{attrs:{cols:"1"}})],1)],2)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;k()(component,{VAutocomplete:w.a,VBtn:y.a,VCard:O.a,VCardText:j.b,VCol:R.a,VContainer:$.a,VDatePicker:S.a,VDialog:C.a,VFabTransition:V.c,VForm:Y.a,VIcon:T.a,VMenu:L.a,VProgressLinear:M.a,VRow:P.a,VSpacer:H.a,VTextField:A.a,VToolbar:E.a,VToolbarItems:B.a,VToolbarTitle:B.b})},709:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));var n=r(459);function o(e){var t=n.a+"/api/transition_purchase";return Object(n.b)("post",t,e)}function c(e){var t=n.a+"/api/po_number_where/"+e;return Object(n.b)("post",t,{})}},993:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(39),r(709)),c=r(549),l=r(662),d={components:{dateSelect:c.default,dialogNew:l.default},data:function(){return{user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission"),loading:!1,search:"",headers:[{text:"ลำดับ",value:"no",align:"center"},{text:"รหัสสั่งซื้อ",value:"po_number"},{text:"วันที่",value:"updated_at"},{text:"รายการ",value:"po_active"},{text:"ผู้สั่ง/ผู้รับ",value:"user.first_name"},{text:"เบอร์ติดต่อ",value:"user.tel"},{text:"สาขา",value:"branch.branch_name"},{text:"จำนวนเงิน (บ.)",value:"sumValueAll"}],data:[],id:"",formTitle:"ดูรายการสั่งซื้อ",action:"",dialog:!1}},mounted:function(){},computed:{tHeader:function(){return this.headers.map((function(e){return e.text}))}},methods:{getData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.data=[],(data=new FormData).append("branch_id",e.branch_id),data.append("timeStart",e.timeStart),data.append("timeEnd",e.timeEnd),t.next=7,o.a(data);case 7:return r=t.sent,t.next=10,r.data;case 10:e.data=t.sent;case 11:case"end":return t.stop()}}),t)})))()},selectTimeStart:function(time){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.branch_id=time.branch_id,e.timeStart=time.timeStart,e.timeEnd=time.timeEnd,e.getData();case 4:case"end":return t.stop()}}),t)})))()},editItem:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formTitle="ดูรายการสั่งซื้อ",t.dialog=!0,t.id=e,t.action="history";case 4:case"end":return r.stop()}}),r)})))()}},watch:{data:function(){var e=this;return this.data.map((function(t){t.no=e.data.map((function(e){return e.id})).indexOf(t.id)+1}))}}},m=r(42),f=r(51),v=r.n(f),_=r(210),h=r(191),x=r(158),D=r(451),k=r(930),w=r(456),y=r(84),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return-1==e.user_group_permission||9==e.user_group_permission||11==e.user_group_permission?r("div",[r("v-card",[r("v-card-title",[r("v-col",{attrs:{cols:"9"}},[r("dateSelect",{on:{tineSelect:e.selectTimeStart}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-text-field",{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),r("v-data-table",{attrs:{headers:e.headers,items:e.data,"items-per-page":10,search:e.search,loading:e.loading,"no-data-text":"ยังไม่มีการเพิ่มข้อมูล","loading-text":"กำลังโหลดข้อมูลกรุณารอสักครู่"},scopedSlots:e._u([{key:"item.po_number",fn:function(t){var n=t.item;return[r("v-btn",{attrs:{"x-small":"",color:"primary",dark:""},on:{click:function(t){return e.editItem(n.purchase_id)}}},[e._v(e._s(n.po_number))])]}},{key:"item.updated_at",fn:function(t){var n=t.item;return[r("h5",[e._v("\n            "+e._s(e.$moment(n.updated_at).format("DD/MM/YYYY ( HH:mm น.)"))+"\n          ")])]}},{key:"item.sumValueAll",fn:function(t){var n=t.item;return["1"==n.po_active?r("div",[e._v("\n            "+e._s(Number(n.sumValueAll).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}))+"\n          ")]):e._e()]}},{key:"item.po_active",fn:function(t){var n=t.item;return[1==n.po_active?r("div",{staticClass:"blue--text"},[e._v("สร้างเอกสาร")]):e._e(),e._v(" "),2==n.po_active?r("div",{staticClass:"green--text"},[e._v("\n            รับอะไหล่เข้าคลังแล้ว\n          ")]):e._e()]}}],null,!0)})],1),e._v(" "),r("dialogNew",{attrs:{dialog:e.dialog,id:e.id,action:e.action,formTitle:e.formTitle},on:{cancleItem:function(t){e.dialog=!1}}})],1):e._e()}),[],!1,null,null,null);t.default=component.exports;v()(component,{VBtn:_.a,VCard:h.a,VCardTitle:x.c,VCol:D.a,VDataTable:k.a,VSpacer:w.a,VTextField:y.a})}}]);