(window.webpackJsonp=window.webpackJsonp||[]).push([[90,16],{527:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return f})),r.d(t,"c",(function(){return select}));var n=r(459),path="/api/unit";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("put",r,t)}function f(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function select(){var e=n.a+"/api/SelectOnUnit";return Object(n.b)("get",e,{})}},536:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return f})),r.d(t,"c",(function(){return select}));var n=r(459),path="/api/car_part";function o(){var e=n.a+path;return Object(n.b)("get",e,{})}function c(e){var t=n.a+path+"/"+e;return Object(n.b)("delete",t,{})}function l(e){var t=n.a+path;return Object(n.b)("post",t,e)}function d(e,t){var r=n.a+path+"/"+e;return Object(n.b)("post",r,t)}function f(e){var t=n.a+path+"/"+e;return Object(n.b)("get",t,{})}function select(){var e=n.a+"/api/SelectOnCarParts";return Object(n.b)("get",e,{})}},583:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(527)),c={props:["dialog","action","id","formTitle"],data:function(){return{btnloading:!0,formDataLoading:!1,formData:{},rule:[function(e){return!!e||"กรุณาใส่ข้อมูล"}],dialogDeleteComponent:!1}},mounted:function(){},methods:{onAction:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.$refs.form.validate()){r.next=19;break}if(t.btnloading=!0,t.formDataLoading=!0,"add"!=t.action){r.next=11;break}return r.next=6,o.e(t.formData);case 6:n=r.sent,t.$refs.form.reset(),200==n.status?t.$emit("success"):t.$emit("error"),r.next=17;break;case 11:if("edit"!=t.action){r.next=17;break}return r.next=14,o.f(e,t.formData);case 14:c=r.sent,t.$refs.form.reset(),200==c.status?t.$emit("success"):t.$emit("error");case 17:t.btnloading=!1,t.formDataLoading=!1;case 19:case"end":return r.stop()}}),r)})))()}},watch:{dialog:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogDeleteComponent=e.dialog,!e.$props.dialog){t.next=13;break}if("add"!=e.action){t.next=6;break}e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formData={unit_active:"1"};case 1:case"end":return e.stop()}}),e)}))))})),t.next=13;break;case 6:if("edit"!=e.action){t.next=13;break}return e.formDataLoading=!0,t.next=10,o.d(e.id);case 10:r=t.sent,e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.data;case 2:t.formData=e.sent;case 3:case"end":return e.stop()}}),e)}))))})),e.formDataLoading=!1;case 13:e.btnloading=!1;case 14:case"end":return t.stop()}}),t)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}},l=r(42),d=r(51),f=r.n(d),m=r(210),v=r(191),_=r(158),x=r(451),D=r(458),k=r(452),w=r(482),h=r(192),$=r(493),R=r(494),C=r(455),V=r(456),y=r(84),O=r(50),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{"max-width":"50%"},model:{value:e.dialogDeleteComponent,callback:function(t){e.dialogDeleteComponent=t},expression:"dialogDeleteComponent"}},[r("v-card",[r("v-form",{ref:"form",attrs:{autocomplete:"true"},on:{submit:function(t){return t.preventDefault(),e.onAction(e.formData.id)}}},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[e._v("\n          "+e._s(e.formTitle)+"\n        ")]),e._v(" "),e.formDataLoading?r("v-progress-linear",{attrs:{indeterminate:"",color:"yellow darken-2"}}):e._e(),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ชื่อหน่วย","append-icon":"",id:"formData.unit_name",name:"formData.unit_name",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.unit_name,callback:function(t){e.$set(e.formData,"unit_name",t)},expression:"formData.unit_name"}})],1)],1),e._v(" "),r("v-radio-group",{attrs:{id:"formData.unit_active",name:"formData.unit_active",rules:[function(e){return!!e}],row:""},model:{value:e.formData.unit_active,callback:function(t){e.$set(e.formData,"unit_active",t)},expression:"formData.unit_active"}},[[r("div",{staticClass:"mr-1"},[e._v("แสดงตอนเลือก:")])],e._v(" "),r("v-radio",{attrs:{label:"เปิดใช้งาน",value:"1"}}),e._v(" "),r("v-radio",{attrs:{label:"ปิดการใช้งาน",color:"red",value:"2"}})],2)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.$emit("cancleItem")}}},[e._v("ยกเลิก")]),e._v(" "),r("v-btn",{attrs:{type:"submit",color:"success darken-1",text:"",loading:e.btnloading}},[e._v("บันทึก")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:m.a,VCard:v.a,VCardActions:_.a,VCardText:_.b,VCol:x.a,VContainer:D.a,VDialog:k.a,VForm:w.a,VProgressLinear:h.a,VRadio:$.a,VRadioGroup:R.a,VRow:C.a,VSpacer:V.a,VTextField:y.a,VToolbar:O.a})},623:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(536)),c=r(608),l=r(527),d=r(688),f=r(624),m={props:["dialog","action","id","formTitle"],components:{selectAddCarPartType:d.default,selectAddUnit:f.default},data:function(){return{serverUrl:"https://www.psnkp.co.th/server/assets/images/car_parts/",btnloading:!0,formDataLoading:!1,formData:{},rule:[function(e){return!!e||"กรุณาใส่ข้อมูล"}],car_part_types:[],dataUnit:[],dialogDeleteComponent:!1,currentFile:null,imagePreviewURL:null}},mounted:function(){},methods:{selectFile:function(e){this.currentFile=e;var t=e;t?(this.imagePreviewURL=URL.createObjectURL(t),URL.revokeObjectURL(t)):this.imagePreviewURL=null},getCarTypes:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c();case 2:r=t.sent,e.car_part_types=r.data,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},getUnit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.c();case 2:r=t.sent,e.dataUnit=r.data,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},onAction:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.$refs.form.validate()){r.next=23;break}if(t.btnloading=!0,t.formDataLoading=!0,(data=new FormData).append("formData",JSON.stringify(t.formData)),data.append("Image",t.currentFile),"add"!=t.action){r.next=14;break}return r.next=9,o.e(data);case 9:n=r.sent,t.$refs.form.reset(),200==n.status?t.$emit("success"):t.$emit("error"),r.next=21;break;case 14:if("edit"!=t.action){r.next=21;break}return data.append("_method","PATCH"),r.next=18,o.f(e,data);case 18:c=r.sent,t.$refs.form.reset(),200==c.status?t.$emit("success"):t.$emit("error");case 21:t.btnloading=!1,t.formDataLoading=!1;case 23:case"end":return r.stop()}}),r)})))()},addSuccess:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("AddCarPartType"!=e){r.next=5;break}return r.next=3,t.getCarTypes();case 3:r.next=8;break;case 5:if("AddUnit"!=e){r.next=8;break}return r.next=8,t.getUnit();case 8:case"end":return r.stop()}}),r)})))()},addError:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("AddCarPartType"!=e){r.next=5;break}return r.next=3,t.getCarTypes();case 3:r.next=8;break;case 5:if("AddUnit"!=e){r.next=8;break}return r.next=8,t.getUnit();case 8:case"end":return r.stop()}}),r)})))()}},watch:{dialog:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogDeleteComponent=e.dialog,!e.$props.dialog){t.next=16;break}if(e.getCarTypes(),e.getUnit(),e.imagePreviewURL=null,"add"!=e.action){t.next=9;break}e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formData={car_part_active:"1"};case 1:case"end":return e.stop()}}),e)}))))})),t.next=16;break;case 9:if("edit"!=e.action){t.next=16;break}return e.formDataLoading=!0,t.next=13,o.d(e.id);case 13:r=t.sent,e.$nextTick((function(){e.$refs.form.reset();var t=e;e.$nextTick(Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.data;case 2:t.formData=n.sent,null!=r.data.car_part_image&&(e.imagePreviewURL=e.serverUrl+r.data.id+"/"+r.data.car_part_image);case 4:case"end":return n.stop()}}),n)}))))})),e.formDataLoading=!1;case 16:e.btnloading=!1;case 17:case"end":return t.stop()}}),t)})))()},dialogDeleteComponent:function(){this.dialogDeleteComponent||this.$emit("cancleItem")}}},v=r(42),_=r(51),x=r.n(_),D=r(473),k=r(210),w=r(191),h=r(158),$=r(451),R=r(458),C=r(452),V=r(580),y=r(482),O=r(156),j=r(192),T=r(493),L=r(494),U=r(455),A=r(456),P=r(84),F=r(50),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{"max-width":"50%"},model:{value:e.dialogDeleteComponent,callback:function(t){e.dialogDeleteComponent=t},expression:"dialogDeleteComponent"}},[r("v-card",[r("v-form",{ref:"form",attrs:{autocomplete:"true"},on:{submit:function(t){return t.preventDefault(),e.onAction(e.formData.id)}}},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[e._v("\n          "+e._s(e.formTitle)+"\n        ")]),e._v(" "),e.formDataLoading?r("v-progress-linear",{attrs:{indeterminate:"",color:"yellow darken-2"}}):e._e(),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{id:"formData.car_part_type_id",name:"formData.car_part_type_id",items:e.car_part_types,"item-text":"car_part_type_name","item-value":"id",label:"ประเภทอะไหล่",outlined:"",dense:"","hide-details":"","no-data-text":"ไม่มีข้อมูล",rules:e.rule},scopedSlots:e._u([{key:"append-item",fn:function(){return[r("selectAddCarPartType",{on:{success:e.addSuccess,error:e.addError}})]},proxy:!0}]),model:{value:e.formData.car_part_type_id,callback:function(t){e.$set(e.formData,"car_part_type_id",t)},expression:"formData.car_part_type_id"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ชื่อ","append-icon":"",id:"formData.car_part_name",name:"formData.car_part_name",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_name,callback:function(t){e.$set(e.formData,"car_part_name",t)},expression:"formData.car_part_name"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-autocomplete",{attrs:{id:"formData.unit_id",name:"formData.unit_id",items:e.dataUnit,"item-text":"unit_name","item-value":"id","no-data-text":"ไม่มีข้อมูล",label:"หน่วย",outlined:"",dense:"","hide-details":"",rules:e.rule},scopedSlots:e._u([{key:"append-item",fn:function(){return[r("selectAddUnit",{on:{success:e.addSuccess,error:e.addError}})]},proxy:!0}]),model:{value:e.formData.unit_id,callback:function(t){e.$set(e.formData,"unit_id",t)},expression:"formData.unit_id"}})],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"รหัส","append-icon":"",id:"formData.car_part_code",name:"formData.car_part_code",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_code,callback:function(t){e.$set(e.formData,"car_part_code",t)},expression:"formData.car_part_code"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ราคาซื้อ","append-icon":"",id:"formData.car_part_price",name:"formData.car_part_price",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_price,callback:function(t){e.$set(e.formData,"car_part_price",t)},expression:"formData.car_part_price"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ราคาขาย","append-icon":"",id:"formData.car_part_buy",name:"formData.car_part_buy",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_buy,callback:function(t){e.$set(e.formData,"car_part_buy",t)},expression:"formData.car_part_buy"}})],1),e._v(" "),r("v-col",{attrs:{cols:"4"}},[r("v-text-field",{attrs:{autocomplete:"true",label:"ส่วนลด","append-icon":"",id:"formData.car_part_discount",name:"formData.car_part_discount",outlined:"",dense:"","hide-details":"",rules:e.rule},model:{value:e.formData.car_part_discount,callback:function(t){e.$set(e.formData,"car_part_discount",t)},expression:"formData.car_part_discount"}})],1)],1),e._v(" "),r("v-radio-group",{attrs:{id:"formData.car_part_active",name:"formData.car_part_active",rules:e.rule,row:""},model:{value:e.formData.car_part_active,callback:function(t){e.$set(e.formData,"car_part_active",t)},expression:"formData.car_part_active"}},[[r("div",{staticClass:"mr-1"},[e._v("แสดงตอนเลือก:")])],e._v(" "),r("v-radio",{attrs:{label:"เปิดใช้งาน",value:"1"}}),e._v(" "),r("v-radio",{attrs:{label:"ปิดการใช้งาน",color:"red",value:"2"}})],2),e._v(" "),r("div",{staticClass:"d-flex flex-column justify-center"},[r("v-file-input",{attrs:{accept:"image/*","show-size":"",label:null==e.currentFile||null==e.imagePreviewURL?"เลือกรูปภาพ":"เลือกรูปใหม่"},on:{change:e.selectFile}}),e._v(" "),null!=e.currentFile||null!=e.imagePreviewURL?r("v-img",{attrs:{contain:"",height:"250px",src:e.imagePreviewURL}}):e._e()],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.$emit("cancleItem")}}},[e._v("ยกเลิก")]),e._v(" "),r("v-btn",{attrs:{type:"submit",color:"success darken-1",text:"",loading:e.btnloading}},[e._v("บันทึก")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{VAutocomplete:D.a,VBtn:k.a,VCard:w.a,VCardActions:h.a,VCardText:h.b,VCol:$.a,VContainer:R.a,VDialog:C.a,VFileInput:V.a,VForm:y.a,VImg:O.a,VProgressLinear:j.a,VRadio:T.a,VRadioGroup:L.a,VRow:U.a,VSpacer:A.a,VTextField:P.a,VToolbar:F.a})},624:function(e,t,r){"use strict";r.r(t);var n=r(14),o=(r(56),r(462)),c={components:{dialogNew:r(583).default},data:function(){return{formTitle:"เพิ่มข้อมูล",dialog:!1,id:"",action:"add"}},mounted:function(){},methods:{AddItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formTitle="เพิ่มข้อมูล",e.dialog=!0,e.id="",e.action="add";case 4:case"end":return t.stop()}}),t)})))()},addSuccess:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,e.$nextTick((function(){e.$emit("success","AddUnit"),o.k()}));case 3:case"end":return t.stop()}}),t)})))()},addError:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,e.$nextTick((function(){e.$emit("error","AddUnit"),o.j()}));case 3:case"end":return t.stop()}}),t)})))()}}},l=r(42),d=r(51),f=r.n(d),m=r(123),v=r(32),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-list-item",{on:{click:function(t){return e.AddItem()}}},[r("v-list-item-content",[r("v-list-item-title",{staticStyle:{color:"#1976d2"}},[e._v("\n        + เพิ่มข้อมูลใหม่\n      ")])],1)],1),e._v(" "),r("dialogNew",{attrs:{dialog:e.dialog,id:e.id,action:e.action,formTitle:e.formTitle},on:{cancleItem:function(t){e.dialog=!1},success:function(t){return e.addSuccess()},error:function(t){return e.addError()}}})],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VListItem:m.a,VListItemContent:v.a,VListItemTitle:v.c})}}]);