(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{1037:function(t,e,n){"use strict";n.r(e);var r=n(14),o=n(2),c=(n(39),n(8),n(17),n(57),n(506)),d=n(539),l={components:{dialogReceiveDown:n(629).default},data:function(){var t;return t={loading:!0,dialogReceiveDown:!1,user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission"),id:"",car_no:"",search:"",dialog:!1,formTitle:"Add",action:"add"},Object(o.a)(t,"user_group_permission",this.$auth.$storage.getLocalStorage("userData-user_group_permission")),Object(o.a)(t,"headers",[{text:"รหัสงาน",value:"working_id",width:"8%"},{text:"ลำดับรถ",value:"cars.car_no"},{text:"ลูกค้า",value:"customer_name",width:"12%"},{text:"เซล",value:"sale_name",width:"12%"},{text:"ทีม/สาขา/ทีมย่อย",value:"sale_detail",width:"15%"},{text:"เงินดาวน์",value:"appointment_banks.down",width:"9%"},{text:"เงินที่ได้รับ",value:"sumFinancial",width:"9%"},{text:"ค้างดาวน์",value:"remain",width:"9%"},{text:"จัดการ",value:"actions",sortable:!1,width:"5%"}]),Object(o.a)(t,"data",[]),Object(o.a)(t,"dataAll",[]),Object(o.a)(t,"dataSelectBranch_teams",[]),Object(o.a)(t,"branch_team_id",""),t},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBranch_teams();case 2:return e.next=4,t.getData();case 4:case"end":return e.stop()}}),e)})))()},computed:{tHeader:function(){return this.headers.map((function(t){return t.text}))}},methods:{getData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c();case 2:n=e.sent,t.data=n.data,t.dataAll=n.data,t.loading=!1,t.$nextTick((function(){3!=t.user_group_permission&&2!=t.user_group_permission||(t.branch_team_id=t.$auth.$storage.getLocalStorage("userDataOrg-branch_team_id"),t.changeBranch_team())}));case 7:case"end":return e.stop()}}),e)})))()},getBranch_teams:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c();case 2:n=e.sent,t.dataSelectBranch_teams=n.data,t.dataSelectBranch_teams.unshift({id:-1,branch_team_name:"ทั้งหมด"});case 5:case"end":return e.stop()}}),e)})))()},changeBranch_team:function(){var t=this;this.data=this.dataAll.filter((function(e){return e.branch_team_id==t.branch_team_id||-1==t.branch_team_id}))},ReceiveDown:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.car_no=t,n.id=e,n.dialogReceiveDown=!0;case 3:case"end":return r.stop()}}),r)})))()}},watch:{dataAll:function(){this.dataAll.map((function(t,e){t.no=e+1,t.working_id="W"+t.id,t.customer_name=t.customer_name+"<br>"+t.customer_tel,t.remain=Number(t.appointment_banks.down)-Number(t.sumFinancial),t.sale_detail=t.branch_team_name+"<br>"+t.branch_name+"<br>"+t.team_name}))}}},_=n(42),m=n(52),v=n.n(m),f=n(472),h=n(210),x=n(192),w=n(157),y=n(445),k=n(914),O=n(146),S=n(451),j=n(86),component=Object(_.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",[n("v-card-title",[n("v-autocomplete",{attrs:{items:t.dataSelectBranch_teams,"item-text":"branch_team_name","item-value":"id",label:"ทีมสาขา","no-data-text":"ไม่มีข้อมูล",outlined:"",dense:"","hide-details":"",readonly:2==t.user_group_permission},on:{change:t.changeBranch_team},model:{value:t.branch_team_id,callback:function(e){t.branch_team_id=e},expression:"branch_team_id"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),n("v-data-table",{attrs:{headers:t.headers,items:t.data,"items-per-page":10,search:t.search,loading:t.loading,dense:"","loading-text":"กำลังโหลดข้อมูลกรุณารอสักครู่","no-data-text":"ยังไม่มีการเพิ่มข้อมูล"},scopedSlots:t._u([{key:"item.cars.car_no",fn:function(e){var r=e.item;return[n("div",[n("b",[t._v(t._s(r.cars.car_no))])]),t._v(" "),n("div",[t._v(t._s(r.car_model_name)+" : "+t._s(r.car_series_name))]),t._v(" "),n("div",[t._v(t._s(r.car_regis))])]}},{key:"item.customer_name",fn:function(e){var r=e.item;return[n("div",{domProps:{innerHTML:t._s(r.customer_name)}})]}},{key:"item.sale_detail",fn:function(e){var r=e.item;return[n("div",{domProps:{innerHTML:t._s(r.sale_detail)}})]}},{key:"item.appointment_banks.down",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(Number(n.appointment_banks.down).toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}))+"\n      ")]}},{key:"item.sumFinancial",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(Number(n.sumFinancial).toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}))+"\n      ")]}},{key:"item.remain",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(Number(n.remain).toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}))+"\n      ")]}},{key:"item.actions",fn:function(e){var r=e.item;return[2!=t.user_group_permission?n("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(e){return t.ReceiveDown(r.cars.car_no,r.id)}}},[n("v-icon",[t._v(" mdi-pencil ")])],1):t._e()]}}],null,!0)})],1),t._v(" "),n("dialogReceiveDown",{attrs:{dialog:t.dialogReceiveDown,idWork:t.id,car_no:t.car_no},on:{cancleItem:function(e){t.dialogReceiveDown=!1}}})],1)}),[],!1,null,null,null);e.default=component.exports;v()(component,{VAutocomplete:f.a,VBtn:h.a,VCard:x.a,VCardTitle:w.c,VCol:y.a,VDataTable:k.a,VIcon:O.a,VSpacer:S.a,VTextField:j.a})},506:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"m",(function(){return _})),n.d(e,"h",(function(){return m})),n.d(e,"g",(function(){return v})),n.d(e,"b",(function(){return f})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return x})),n.d(e,"d",(function(){return w})),n.d(e,"c",(function(){return y})),n.d(e,"l",(function(){return k}));var r=n(454),path="/api/working";function o(){var t=r.a+"/api/working_allData";return Object(r.b)("get",t,{})}function c(t){var e=r.a+path;return Object(r.b)("post",e,t)}function d(t,e){var n=r.a+path+"/"+t;return Object(r.b)("put",n,e)}function l(t){var e=r.a+path+"/"+t;return Object(r.b)("get",e,{})}function _(t,e){var n=r.a+"/api/updateStatusWorking/"+t;return Object(r.b)("post",n,e)}function m(t){var e=r.a+"/api/workWhereClose";return Object(r.b)("post",e,t)}function v(t){var e=r.a+"/api/selectWhereCancle";return Object(r.b)("post",e,t)}function f(t){var e=r.a+"/api/work_cancel";return Object(r.b)("post",e,t)}function h(t){var e=r.a+"/api/get_work_cancel";return Object(r.b)("post",e,t)}function x(t){var e=r.a+"/api/working_search_id/"+t;return Object(r.b)("post",e,{})}function w(t){var e=r.a+"/api/followWork";return Object(r.b)("post",e,t)}function y(t){var e=r.a+"/api/followDown";return Object(r.b)("get",e,t)}function k(t,e){var n=r.a+"/api/updateNote/"+t;return Object(r.b)("post",n,e)}},539:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return _})),n.d(e,"c",(function(){return select}));var r=n(454),path="/api/branch_teams";function o(){var t=r.a+path;return Object(r.b)("get",t,{})}function c(t){var e=r.a+path+"/"+t;return Object(r.b)("delete",e,{})}function d(t){var e=r.a+path;return Object(r.b)("post",e,t)}function l(t,e){var n=r.a+path+"/"+t;return Object(r.b)("put",n,e)}function _(t){var e=r.a+path+"/"+t;return Object(r.b)("get",e,{})}function select(){var t=r.a+"/api/SelectOnBranchTeams";return Object(r.b)("get",t,{})}},570:function(t,e,n){var content=n(614);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("1ef21d35",content,!0,{sourceMap:!1})},571:function(t,e,n){var content=n(616);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("5bc69adb",content,!0,{sourceMap:!1})},613:function(t,e,n){"use strict";n(570)},614:function(t,e,n){var r=n(9)(!1);r.push([t.i,"table[data-v-3a93ca9a]{*border-collapse:collapse;border-spacing:0;width:100%}th[data-v-3a93ca9a]:first-child{border-radius:4px 0 0 0}th[data-v-3a93ca9a]:last-child{border-radius:0 4px 0 0}th[data-v-3a93ca9a]:only-child{border-radius:4px 4px 0 0}.bordered[data-v-3a93ca9a]{border:1px solid rgba(0,0,0,.3);border-radius:4px}.bordered th[data-v-3a93ca9a]{font-weight:600;background-color:#eee}.right-input[data-v-3a93ca9a] input{text-align:right}",""]),t.exports=r},615:function(t,e,n){"use strict";n(571)},616:function(t,e,n){var r=n(9)(!1);r.push([t.i,".none-rotation.v-select.v-select--is-menu-active .v-input__icon--append .v-icon{transform:none!important}.hide-border.theme--light.v-text-field--outlined:not(.v-input--is-focused):not(.v-input--has-state)>.v-input__control>.v-input__slot fieldset{color:transparent}",""]),t.exports=r},629:function(t,e,n){"use strict";n.r(e);var r=n(14),o=(n(57),n(538)),c={components:{dialogFinancial:n(594).default},props:["dialog","idWork","car_no"],data:function(){return{dialogComponent:!1,data:[],financial_id:"",dialogFinancial:!1,formTitleFinancial:"Add",actionFinancial:"check",payment_type:"1",dialogContract:!1,formTitleContract:"Add",actionContract:"check"}},mounted:function(){},methods:{getData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b(t.idWork);case 2:n=e.sent,t.data=n.data;case 4:case"end":return e.stop()}}),e)})))()},Financial:function(t,e,n,o,c){var d=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:d.formTitleFinancial="หลักฐานการรับเงิน ธุระกิจการขายรถยนต์ใช้แล้ว",d.car_no=e,d.idWork=n,d.financial_id=t,d.payment_type=o,d.dialogFinancial=!0,d.actionFinancial=c;case 7:case"end":return r.stop()}}),r)})))()},deleteItem:function(t){},cancleItem:function(){this.$emit("cancleItem")},onSubmit:function(){this.$emit("cancleItem")}},watch:{dialog:function(){this.dialogComponent=this.dialog},dialogComponent:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dialogComponent?t.getData():t.$emit("cancleItem");case 1:case"end":return e.stop()}}),e)})))()}}},d=(n(613),n(615),n(42)),l=n(52),_=n.n(l),m=n(210),v=n(192),f=n(157),h=n(446),x=n(476),w=n(146),y=n(451),k=n(51),O=n(93),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialogComponent,callback:function(e){t.dialogComponent=e},expression:"dialogComponent"}},[n("v-card",{staticStyle:{position:"relative","background-color":"#eee"},attrs:{tile:""}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[n("div",{staticClass:"container",staticStyle:{"align-items":"center",display:"flex",position:"relative",padding:"0px"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){return t.cancleItem()}}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),n("v-toolbar-title",[t._v("ข้อมูลการชำระเงินจากลูกค้า")]),t._v(" "),n("v-spacer")],1)]),t._v(" "),n("v-card-text",[n("v-card",{staticClass:"container"},[n("v-card-text",[n("div",{staticClass:"text-center",staticStyle:{"font-size":"26px","font-weight":"500"}},[t._v("\n                เงินจอง / เงินดาวน์ / ซื้อเงินสด\n              ")]),t._v(" "),n("table",{staticClass:"bordered mt-3"},[n("thead",[n("tr",[n("th",{staticStyle:{padding:"10px","text-align":"center"},attrs:{width:"5%"}},[t._v("\n                      ลำดับ\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"},attrs:{width:"8%"}},[t._v("\n                      ประเภท\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"},attrs:{width:"12%"}},[t._v("\n                      วันที่บันทึก\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"},attrs:{width:"15%"}},[t._v("\n                      ลูกค้า\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"},attrs:{width:"10%"}},[t._v("\n                      ลำดับรถ\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"},attrs:{width:"15%"}},[t._v("\n                      รถ\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"},attrs:{width:"15%"}},[t._v("\n                      จำนวนเงิน\n                    ")]),t._v(" "),n("th",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"right"},attrs:{width:"5%"}})])]),t._v(" "),n("tbody",t._l(t.data,(function(e,r){return n("tr",{key:r,staticStyle:{"line-height":"1rem","font-size":"1rem"}},[n("td",{staticStyle:{"border-top":"1px solid rgba(0, 0, 0, 0.2)","text-align":"center"}},[t._v("\n                      "+t._s(r+1)+"\n                    ")]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"left"}},[1==e.payment_type?n("div",[t._v("\n                        จอง ("+t._s(e.id)+")\n                      ")]):2==e.payment_type?n("div",[t._v("\n                        ดาวน์ ("+t._s(e.id)+")\n                      ")]):3==e.payment_type?n("div",[t._v("\n                        ซื้อเงินสด ("+t._s(e.id)+")\n                      ")]):n("div",[t._v("N/A ("+t._s(e.id)+")")])]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px"}},[t._v("\n                      "+t._s(e.created_at)+"\n                    ")]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px"}},[n("div",[t._v(t._s(e.customer_name))]),t._v(" "),n("div",[t._v(t._s(e.customer_tel))])]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px"}},[n("div",[t._v(t._s(e.car_no))])]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px"}},[n("div",[t._v(t._s(e.car_model_name))]),t._v(" "),n("div",[t._v(t._s(e.car_series_name))]),t._v(" "),n("div",[t._v(t._s(e.car_regis))])]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)",padding:"10px","text-align":"right"}},[n("div",[t._v(t._s(e.bath))]),t._v(" "),n("div",[t._v(t._s(e.bath_string))])]),t._v(" "),n("td",{staticStyle:{"border-left":"1px solid rgba(0, 0, 0, 0.2)","border-top":"1px solid rgba(0, 0, 0, 0.2)","text-align":"center"}},[n("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(n){return t.Financial(e.id,t.car_no,t.idWork,e.payment_type,"edit")}}},[n("v-icon",[t._v(" mdi-pencil ")])],1)],1)])})),0)]),t._v(" "),n("v-btn",{staticClass:"mt-3",attrs:{text:"",color:"primary"},on:{click:function(e){return t.Financial("",t.car_no,t.idWork,"2","add")}}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-plus ")]),t._v("\n                เพิ่มรายการ\n              ")],1),t._v(" "),n("dialogFinancial",{attrs:{dialogFinancial:t.dialogFinancial,financial_id:t.financial_id,idWork:t.idWork,car_no:t.car_no,payment_type:t.payment_type,actionFinancial:t.actionFinancial,formTitleFinancial:t.formTitleFinancial},on:{cancleItem:function(e){t.dialogFinancial=!1},success:function(e){t.dialogFinancial=!1,t.getData()},error:function(e){t.dialogFinancial=!1}}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"3a93ca9a",null);e.default=component.exports;_()(component,{VBtn:m.a,VCard:v.a,VCardText:f.b,VDialog:h.a,VForm:x.a,VIcon:w.a,VSpacer:y.a,VToolbar:k.a,VToolbarTitle:O.b})}}]);