(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{600:function(t,e,n){"use strict";n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return _}));var r=n(454),path="/api/request_changeCar";function c(t){var e=r.a+path;return Object(r.b)("post",e,t)}function o(t,e){var n=r.a+path+"/"+t;return Object(r.b)("put",n,e)}function d(t){var e=r.a+path+"/"+t;return Object(r.b)("get",e,{})}function l(t){var e=r.a+path+"/"+t;return Object(r.b)("delete",e,{})}function v(t){var e=r.a+path+"/cancle/"+t;return Object(r.b)("delete",e,{})}function m(t){var e=r.a+path+"/indexCustom";return Object(r.b)("post",e,t)}function _(t){var e=r.a+path+"/countData";return Object(r.b)("post",e,t)}},988:function(t,e,n){"use strict";n.r(e);var r=n(14),c=(n(57),n(39),n(600)),o=n(457),d=n(492),l=n(129),v=n.n(l),m=n(516),_={components:{dialogImage:d.default,dateSelect2:m.default},data:function(){return{serverUrl:"https://www.psnkp.co.th/server",timeStart:v()().startOf("day").format("YYYY-MM-DD HH:mm"),timeEnd:v()().endOf("day").format("YYYY-MM-DD HH:mm"),toggle:"pedding",loading:!0,dialogImg:!1,imgUrl:"",dialog:!1,id:"",formTitle:"",action:"",user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission"),search:"",isExpanded:!0,headers:[{text:"",value:"data-table-expand"},{text:"จัดการ",value:"actions",sortable:!1,width:"10%"},{text:"Line",value:"pictureUrl",align:"center",width:"12%"},{text:"เซล/สาขา",value:"sale_name"},{text:"ลำดับรถเดิม",value:"car_no_old",width:"10%"},{text:"ลำดับรถใหม่",value:"car_no_new",width:"10%"},{text:"ประเภท",value:"sign_type"},{text:"รูปบัตร/ใบสรุป",value:"id_card",width:"12%"},{text:"วันแจ้ง",value:"created_at",width:"11%"}],data:[],count:[]}},mounted:function(){this.getData()},computed:{tHeader:function(){return this.headers.map((function(t){return t.text}))}},methods:{selectTimeStart:function(time){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.timeStart=time.timeStart,t.timeEnd=time.timeEnd,t.getData();case 3:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.countData(),(data=new FormData).append("timeStart",t.timeStart),data.append("timeEnd",t.timeEnd),data.append("toggle",t.toggle),e.next=8,c.d(data);case 8:n=e.sent,t.data=n.data,t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},countData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(data=new FormData).append("timeStart",t.timeStart),data.append("timeEnd",t.timeEnd),e.next=5,c.b(data);case 5:n=e.sent,t.count=n.data;case 7:case"end":return e.stop()}}),e)})))()},showImg:function(t){this.dialogImg=!0,this.imgUrl=t},editItem:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c.g(t).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$nextTick((function(){e.getData()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})))()},cancleItem:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a(t);case 2:n.sent,e.getData();case 4:case"end":return n.stop()}}),n)})))()},deleteItem:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=o.a(),n.next=3,d.then((function(n){1==n&&c.c(t).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$nextTick((function(){e.getData()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 3:case"end":return n.stop()}}),n)})))()},addSuccess:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dialog=!1,t.$nextTick((function(){t.getData(),o.k()}));case 2:case"end":return e.stop()}}),e)})))()},addError:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dialog=!1,t.$nextTick((function(){t.getData(),o.j()}));case 2:case"end":return e.stop()}}),e)})))()}},watch:{data:function(){return this.data.map((function(t,e){t.no=e+1}))}}},f=_,h=n(42),x=n(52),k=n.n(x),w=n(198),y=n(210),D=n(908),I=n(192),R=n(157),O=n(445),j=n(914),S=n(194),T=n(146),U=n(155),V=n(450),E=n(451),C=n(86),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return-1==t.user_group_permission?n("div",[n("v-card",[n("v-card-text",[n("dateSelect2",{on:{timeSelect:t.selectTimeStart}}),t._v(" "),n("v-row",{staticClass:"d-flex align-center"},[n("v-btn-toggle",{staticClass:"ml-5",attrs:{mandatory:"",color:"primary"},on:{change:function(e){return t.getData()}},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[n("v-btn",{attrs:{value:"pedding"}},[t._v("รอดำเนินการ ("+t._s(t.count.pedding)+")")]),t._v(" "),n("v-btn",{attrs:{value:"approve"}},[t._v("ดำเนินการแล้ว ("+t._s(t.count.approve)+")")]),t._v(" "),n("v-btn",{attrs:{value:"cancle"}},[t._v("ยกเลิก ("+t._s(t.count.cancle)+")")]),t._v(" "),n("v-btn",{attrs:{value:"all"}},[t._v("ทั้งหมด ("+t._s(t.count.all)+")")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-col",[n("v-text-field",{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":"",outlined:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),n("v-data-table",{attrs:{headers:t.headers,items:t.data,"items-per-page":10,search:t.search,loading:t.loading,"show-expand":"","loading-text":"กำลังโหลดข้อมูลกรุณารอสักครู่","no-data-text":"ไม่มีข้อมูล"},scopedSlots:t._u([{key:"item.data-table-expand",fn:function(e){var r=e.item,c=e.isExpanded,o=e.expand;return[!c&&r.note?n("button",{staticClass:"\n            v-icon\n            notranslate\n            v-data-table__expand-icon\n            v-icon--link\n            mdi mdi-chevron-down\n            theme--light\n          ",attrs:{type:"button"},on:{click:function(t){return o(!0)}}}):t._e(),t._v(" "),c&&r.note?n("button",{staticClass:"\n            v-icon\n            notranslate\n            v-data-table__expand-icon\n            v-icon--link\n            mdi mdi-chevron-down\n            theme--light\n            v-data-table__expand-icon--active\n          ",attrs:{type:"button"},on:{click:function(t){return o(!1)}}}):t._e()]}},{key:"expanded-item",fn:function(e){var r=e.headers,c=e.item;return[n("td",{attrs:{colspan:r.length}},[n("span",{staticStyle:{"white-space":"pre"}},[t._v(t._s(c.note))])])]}},{key:"item.pictureUrl",fn:function(e){var r=e.item;return[n("v-btn",{attrs:{icon:""}},[n("v-avatar",{attrs:{size:"40"},on:{click:function(e){return t.showImg(r.pictureUrl)}}},[n("v-img",{attrs:{src:r.pictureUrl}})],1)],1),t._v(" "),n("div",[t._v(t._s(r.displayName))])]}},{key:"item.sale_name",fn:function(e){var r=e.item;return[n("div",[t._v(t._s(r.sale_name))]),t._v(" "),n("div",[t._v(t._s(r.branch_name))])]}},{key:"item.sign_type",fn:function(e){var r=e.item;return[n("div",[t._v(t._s(r.sign_type))]),t._v(" "),"เซนต์ใหม่"==r.sign_type?n("v-divider"):t._e(),t._v(" "),r.sign_date?n("div",[t._v(t._s(r.sign_date))]):t._e(),t._v(" "),r.bank_name?n("div",[t._v(t._s(r.bank_name))]):t._e(),t._v(" "),r.bank_branch_name?n("div",[t._v(t._s(r.bank_branch_name))]):t._e(),t._v(" "),r.mtk_name?n("div",[n("b",[t._v("MKT: ")]),t._v(t._s(r.mtk_name))]):t._e(),t._v(" "),r.mtk_tel?n("div",[n("b",[t._v("Tel: ")]),t._v(t._s(r.mtk_tel))]):t._e(),t._v(" "),r.credit?n("div",[n("b",[t._v("ผลเครดิต: ")]),t._v(t._s(r.credit))]):t._e(),t._v(" "),r.document?n("div",[n("b",[t._v("เอกสาร: ")]),t._v(t._s(r.document))]):t._e(),t._v(" "),"ไม่ครบ"==r.document?n("v-divider"):t._e(),t._v(" "),r.document_list?n("div",[t._v(t._s(r.document_list))]):t._e()]}},{key:"item.id_card",fn:function(e){var r=e.item;return[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("v-img",{attrs:{width:"40px",src:t.serverUrl+r.id_card},on:{click:function(e){return t.showImg(t.serverUrl+r.id_card)}}})],1),t._v(" "),n("v-col",[n("v-img",{attrs:{width:"40px",src:t.serverUrl+r.booking_sheet},on:{click:function(e){return t.showImg(t.serverUrl+r.booking_sheet)}}})],1)],1)]}},{key:"item.actions",fn:function(e){var r=e.item;return["pedding"==r.request_status?n("v-btn",{attrs:{color:"warning",fab:"","x-small":"",dark:""},on:{click:function(e){return t.editItem(r.id)}}},[n("v-icon",[t._v(" mdi-checkbox-blank-outline")])],1):"approve"==r.request_status?n("v-btn",{attrs:{color:"success",fab:"","x-small":"",dark:""},on:{click:function(e){return t.editItem(r.id)}}},[n("v-icon",[t._v(" mdi-checkbox-outline")])],1):"cancle"==r.request_status?n("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(e){return t.editItem(r.id)}}},[n("v-icon",[t._v(" mdi-arrow-u-left-top")])],1):t._e(),t._v(" "),"cancle"!=r.request_status?n("v-btn",{attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(e){return t.cancleItem(r.id)}}},[n("v-icon",[t._v(" mdi-delete ")])],1):t._e(),t._v(" "),"cancle"==r.request_status?n("v-btn",{attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(e){return t.deleteItem(r.id)}}},[n("v-icon",[t._v(" mdi-delete ")])],1):t._e()]}}],null,!0)})],1),t._v(" "),n("dialogImage",{attrs:{dialog:t.dialogImg,imgUrl:t.imgUrl},on:{cancleItem:function(e){t.dialogImg=!1}}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports;k()(component,{VAvatar:w.a,VBtn:y.a,VBtnToggle:D.a,VCard:I.a,VCardText:R.b,VCol:O.a,VDataTable:j.a,VDivider:S.a,VIcon:T.a,VImg:U.a,VRow:V.a,VSpacer:E.a,VTextField:C.a})}}]);