(window.webpackJsonp=window.webpackJsonp||[]).push([[176,68],{510:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return c})),r.d(e,"f",(function(){return l})),r.d(e,"g",(function(){return d})),r.d(e,"e",(function(){return f})),r.d(e,"c",(function(){return m})),r.d(e,"d",(function(){return h}));var n=r(459),path="/api/users";function o(){var t=n.a+path;return Object(n.b)("get",t,{})}function c(t){var e=n.a+path+"/"+t;return Object(n.b)("delete",e,{})}function l(t){var e=n.a+path;return Object(n.b)("post",e,t)}function d(t,e){var r=n.a+path+"/"+t;return Object(n.b)("post",r,e)}function f(t){var e=n.a+path+"/"+t;return Object(n.b)("get",e,{})}function m(){var t=n.a+"/api/SelectOnSale";return Object(n.b)("get",t,{})}function h(t){var e=n.a+"/api/SelectOnTechnicianBuild/"+t;return Object(n.b)("get",e,{})}},668:function(t,e,r){"use strict";r.r(e);var n=r(508),o=n.d.reactiveProp,c={extends:n.a,mixins:[o],props:["chartData"],data:function(){return{options:{legend:{display:!1},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{}],yAxes:[{ticks:{min:0,stepSize:1}}]},tooltips:{callbacks:{label:function(t,data){return data.datasets[t.datasetIndex].data[t.index]+" คัน"},title:function(t,data){return data.labels[t[0].index]}}}}}},mounted:function(){this.addPlugin({id:"my-plugin",beforeDraw:l}),this.renderChart(this.chartData,this.options)},watch:{}},l={id:"horizontalLine",afterDraw:function(t){var e,r,line,style,n=t.scales["y-axis-0"],canvas=t.chart,o=canvas.ctx;if(t.options.horizontalLine)for(r=0;r<t.options.horizontalLine.length;r++)style=(line=t.options.horizontalLine[r]).style?line.style:"#080808",e=line.y?n.getPixelForValue(line.y):0,o.lineWidth=3,e&&(window.chart=t,o.beginPath(),o.moveTo(0,e),o.lineTo(canvas.width,e),o.strokeStyle=style,o.stroke()),line.text&&(o.fillStyle=style,o.fillText(line.text,0,e+o.lineWidth));else;}},d=c,f=r(42),component=Object(f.a)(d,undefined,undefined,!1,null,null,null);e.default=component.exports},733:function(t,e,r){"use strict";r.r(e);var n=r(14),o=(r(56),r(501)),c=r(130),l=r.n(c),d=r(668),f=function(t,e){return t+e},m={components:{BarChartSale:d.default},props:["user_id"],data:function(){return{years_id:1,yearStart:l()().startOf("year").format("YYYY-MM-DD HH:mm"),yearEnd:l()().endOf("year").format("YYYY-MM-DD HH:mm"),yearSelect:this.$store.state.yearSelect,dataChart:null,sumCarSale:0}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDataBarSale();case 2:case"end":return e.stop()}}),e)})))()},computed:{},methods:{getDataBarSale:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("sale_id",t.user_id),r.append("timeStart",t.yearStart),r.append("timeEnd",t.yearEnd),e.next=6,o.j(r);case 6:for(n=e.sent,c=[0,0,0,0,0,0,0,0,0,0,0,0],l=0;l<n.data.length;l++)c[n.data[l].month-1]=n.data[l].data;t.dataChart={labels:t.$store.state.months_th,datasets:[{backgroundColor:t.$store.state.code_color,data:c}]},t.sumCarSale=c.reduce(f);case 11:case"end":return e.stop()}}),e)})))()},changeSelectYear:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return 1==t?(e.yearStart=l()().startOf("years").format("YYYY-MM-DD HH:mm"),e.yearEnd=l()().endOf("years").format("YYYY-MM-DD HH:mm")):2==t?(e.yearStart=l()().add(-1,"years").startOf("years").format("YYYY-MM-DD HH:mm"),e.yearEnd=l()().add(-1,"years").endOf("years").format("YYYY-MM-DD HH:mm")):3==t?(e.yearStart=l()().add(-2,"years").startOf("years").format("YYYY-MM-DD HH:mm"),e.yearEnd=l()().add(-2,"years").endOf("years").format("YYYY-MM-DD HH:mm")):4==t&&(e.yearStart=l()().add(-3,"years").startOf("years").format("YYYY-MM-DD HH:mm"),e.yearEnd=l()().add(-3,"years").endOf("years").format("YYYY-MM-DD HH:mm")),r.next=3,e.getDataBarSale();case 3:case"end":return r.stop()}}),r)})))()}},watch:{user_id:function(){this.getDataBarSale()}}},h=r(42),v=r(51),_=r.n(v),y=r(473),D=r(191),Y=r(451),S=r(455),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",[t._v("จำนวยรถที่ขายได้แต่ละเดือน")]),t._v(" "),r("v-card",{staticClass:"mt-5"},[r("v-row",{staticClass:"pa-2 mt-5"},[r("v-col",[r("h5",[t._v("\n          รวมทั้งหมด:\n          "+t._s(Number(t.sumCarSale).toLocaleString("th-TH",{maximumFractionDigits:0,minimumFractionDigits:0}))+"\n          คัน\n        ")])]),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-autocomplete",{attrs:{items:t.yearSelect,"no-data-text":"ไม่มีข้อมูล","item-text":"title","item-value":"value",label:"เลือกปี:",outlined:"",dense:"","hide-details":""},on:{change:t.changeSelectYear},model:{value:t.years_id,callback:function(e){t.years_id=e},expression:"years_id"}})],1)],1),t._v(" "),r("v-row",[r("v-col",[r("BarChartSale",{staticClass:"mt-5",attrs:{"chart-data":t.dataChart}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;_()(component,{BarChartSale:r(668).default}),_()(component,{VAutocomplete:y.a,VCard:D.a,VCol:Y.a,VRow:S.a})},935:function(t,e,r){"use strict";r.r(e);var n=r(14),o=(r(56),r(39),r(510)),c=r(780),l=r(733),d={components:{DoughnutChartDashSale:c.default,BarChartDashSale:l.default},data:function(){return{user_id:null,user_sale:[],user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission"),branch_id:this.$auth.$storage.getLocalStorage("userData-branch_id")}},mounted:function(){this.getUserSale()},computed:{tHeader:function(){return this.headers.map((function(t){return t.text}))}},methods:{getUserSale:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c();case 2:if(r=e.sent,2==t.user_group_permission){for(n=[],c=0;c<r.data.length;c++)t.branch_id==r.data[c].branch_id&&n.push(r.data[c]);t.user_sale=n}else t.user_sale=r.data;case 4:case"end":return e.stop()}}),e)})))()}},watch:{data:function(){var t=this;return this.data.map((function(e){e.no=t.data.map((function(t){return t.id})).indexOf(e.id)+1}))}}},f=r(42),m=r(51),h=r.n(m),v=r(473),_=r(191),y=r(451),D=r(455),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return-1==t.user_group_permission||9==t.user_group_permission||2==t.user_group_permission?r("div",[r("v-card",{staticClass:"d-flex"},[r("v-row",{staticClass:"pa-2"},[r("v-col",{attrs:{cols:"9"}}),t._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-autocomplete",{attrs:{items:t.user_sale,"no-data-text":"ไม่มีข้อมูล","item-text":"first_name","item-value":"id",label:"เลือกบุคลฝ่ายขาย:",outlined:"",dense:"","hide-details":""},model:{value:t.user_id,callback:function(e){t.user_id=e},expression:"user_id"}})],1)],1)],1),t._v(" "),r("br"),t._v(" "),r("v-row",[r("v-col",[r("DoughnutChartDashSale",{attrs:{user_id:t.user_id}})],1)],1),t._v(" "),r("br"),t._v(" "),r("v-row",[r("v-col",[r("BarChartDashSale",{attrs:{user_id:t.user_id}})],1)],1),t._v(" "),r("br")],1):t._e()}),[],!1,null,null,null);e.default=component.exports;h()(component,{DoughnutChartDashSale:r(780).default,BarChartDashSale:r(733).default}),h()(component,{VAutocomplete:v.a,VCard:_.a,VCol:y.a,VRow:D.a})}}]);