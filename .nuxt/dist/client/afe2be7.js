(window.webpackJsonp=window.webpackJsonp||[]).push([[256],{1013:function(e,t,r){"use strict";r.r(t);var n=r(14),c=(r(57),r(39),r(533),r(17),r(742)),o=r(457),d=r(483),l=r(493),m={components:{dialogNew:r(895).default},data:function(){return{loading:!0,search:"",dialog:!1,id:"",formTitle:"Add",action:"add",user_group_permission:this.$auth.$storage.getLocalStorage("userData-user_group_permission"),headers:[{text:"ลำดับ",value:"no",width:"7%",align:"center"},{text:"รุ่น",value:"car_serie.car_series_name",width:"15%"},{text:"รุ่นย่อย",value:"car_serie_sub.car_serie_sub_name",width:"10%"},{text:"เกียร์",value:"car_gear",width:"10%"},{text:"ปีผลิต (ค.ศ)",value:"year",width:"10%"},{text:"สถานะ",value:"middle_price_active",width:"5%"},{text:"จัดการ",value:"actions",sortable:!1,width:"10%"}],carSerie:[],carSerieSub:[],car_serie_id:null,car_serie_sub_id:null,data:[],getfirst:!0,dataMiddle:[]}},mounted:function(){this.getData(),this.getCarseries()},computed:{tHeader:function(){return this.headers.map((function(e){return e.text}))}},methods:{getCarseries:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.carSerie=[],t.next=3,d.c();case 3:return r=t.sent,e.carSerie=r.data,t.next=7,e.getCarSerieSub();case 7:case"end":return t.stop()}}),t)})))()},getCarSerieSub:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.carSerieSub=[],1!=Number.isInteger(e.car_serie_id)){t.next=6;break}return t.next=4,l.c(e.car_serie_id);case 4:r=t.sent,e.carSerieSub=r.data;case 6:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=e.getfirst){t.next=9;break}return t.next=3,c.b();case 3:r=t.sent,e.data=r.data,e.dataMiddle=r.data,e.getfirst=!1,t.next=10;break;case 9:if(1==Number.isInteger(e.car_serie_id)&&1==Number.isInteger(e.car_serie_sub_id))for(e.data=[],n=0;n<e.dataMiddle.length;n++)e.car_serie_id==e.dataMiddle[n].car_serie_id&&e.car_serie_sub_id==e.dataMiddle[n].car_serie_sub_id&&e.data.push(e.dataMiddle[n]);case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},AddItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formTitle="เพิ่มข้อมูล",e.dialog=!0,e.id="",e.action="add";case 4:case"end":return t.stop()}}),t)})))()},editItem:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.formTitle="แก้ไขข้อมูล",t.dialog=!0,t.id=e,t.action="edit";case 4:case"end":return r.stop()}}),r)})))()},deleteItem:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=o.a(),r.next=3,d.then((function(r){1==r&&c.a(e).then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200==r.status?o.k():o.j(),t.$nextTick((function(){t.getData()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 3:case"end":return r.stop()}}),r)})))()},addSuccess:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dialog=!1,e.getfirst=!0,e.$nextTick((function(){e.getData(),o.k()}));case 3:case"end":return t.stop()}}),t)})))()},addError:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dialog=!1,e.$nextTick((function(){e.getData(),o.j()}));case 2:case"end":return t.stop()}}),t)})))()}},watch:{data:function(){var e=this;return this.data.map((function(t){t.no=e.data.map((function(e){return e.id})).indexOf(t.id)+1}))}}},_=m,f=r(42),v=r(52),h=r.n(v),x=r(472),w=r(210),k=r(192),S=r(157),R=r(445),T=r(914),j=r(146),D=r(450),C=r(451),O=r(86),component=Object(f.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return-1==e.user_group_permission||9==e.user_group_permission?r("div",[r("v-card",[r("v-card-title",[[r("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return t.stopPropagation(),e.AddItem()}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n            เพิ่มรายการใหม่\n          ")],1),e._v(" "),r("v-row",{staticClass:"ml-2"},[r("v-col",[r("v-autocomplete",{attrs:{items:e.carSerie,"no-data-text":"ไม่มีข้อมูล","item-text":"car_series_name","item-value":"id",placeholder:"เลือกรุ่นรถ",label:"รุ่นรถ",outlined:"",dense:"","hide-details":""},on:{change:e.getCarSerieSub},model:{value:e.car_serie_id,callback:function(t){e.car_serie_id=t},expression:"car_serie_id"}})],1),e._v(" "),r("v-col",[r("v-autocomplete",{attrs:{items:e.carSerieSub,"item-text":"car_serie_sub_name","item-value":"id",label:"รุ่นย่อย","no-data-text":"ไม่มีข้อมูล",placeholder:"เลือกรุ่นย่อย",outlined:"",dense:"","hide-details":""},on:{change:e.getData},model:{value:e.car_serie_sub_id,callback:function(t){e.car_serie_sub_id=t},expression:"car_serie_sub_id"}})],1)],1)],e._v(" "),r("v-spacer"),e._v(" "),r("v-col",{attrs:{cols:"3"}},[r("v-text-field",{attrs:{id:"search",name:"search","append-icon":"mdi-magnify",label:"ค้นหา","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],2),e._v(" "),r("v-data-table",{attrs:{headers:e.headers,items:e.data,"items-per-page":10,search:e.search,loading:e.loading,"loading-text":"กำลังโหลดข้อมูลกรุณารอสักครู่","no-data-text":"ยังไม่มีการเพิ่มข้อมูล"},scopedSlots:e._u([{key:"item.amount_down_start",fn:function(t){var r=t.item;return[e._v("\n          "+e._s(Number(r.amount_down_start).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}))+"\n        ")]}},{key:"item.amount_down_end",fn:function(t){var r=t.item;return[e._v("\n          "+e._s(Number(r.amount_down_end).toLocaleString("th-TH",{maximumFractionDigits:2,minimumFractionDigits:2}))+"\n        ")]}},{key:"item.car_gear",fn:function(t){var n=t.item;return["1"==n.car_gear?r("h5",{staticClass:"green--text"},[e._v("AT")]):e._e(),e._v(" "),"2"==n.car_gear?r("h5",{staticClass:"orange--text"},[e._v("MT")]):e._e()]}},{key:"item.middle_price_active",fn:function(t){return["1"==t.item.middle_price_active?r("v-btn",{attrs:{"x-small":"",color:"success",dark:""}},[e._v("เปิดใช้งาน")]):r("v-btn",{attrs:{"x-small":"",color:"red",dark:""}},[e._v("ปิดการใช้งาน")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(t){return e.editItem(n.id)}}},[r("v-icon",[e._v(" mdi-pencil ")])],1)]}}],null,!0)}),e._v(" "),r("dialogNew",{attrs:{dialog:e.dialog,id:e.id,action:e.action,formTitle:e.formTitle},on:{cancleItem:function(t){e.dialog=!1},success:function(t){return e.addSuccess()},error:function(t){return e.addError()}}})],1)],1):e._e()}),[],!1,null,null,null);t.default=component.exports;h()(component,{VAutocomplete:x.a,VBtn:w.a,VCard:k.a,VCardTitle:S.c,VCol:R.a,VDataTable:T.a,VIcon:j.a,VRow:D.a,VSpacer:C.a,VTextField:O.a})}}]);